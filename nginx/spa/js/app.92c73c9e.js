(()=>{var e={4557:(e,t,a)=>{"use strict";var o=a(1957),l=a(1947),s=a(499),r=a(9835);function n(e,t,a,o,l,s){const n=(0,r.up)("router-view");return(0,r.wg)(),(0,r.j4)(n)}const i=(0,r.aZ)({name:"App"});var d=a(1639);const c=(0,d.Z)(i,[["render",n]]),u=c;var m=a(3340),p=a(8339);function h(e,t,a,o,l,s){const n=(0,r.up)("particles"),i=(0,r.up)("authorization");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(n),(0,r.Wm)(i,{class:"absolute-center"})],64)}const w={id:"particles-js",class:"normal_gradient"};function g(e,t,a,o,l,s){return(0,r.wg)(),(0,r.iD)("div",w)}const f={mounted(){particlesJS("particles-js",{particles:{number:{value:25,density:{enable:!0,value_area:631.3280775270874}},color:{value:"#fff"},shape:{type:"circle",stroke:{width:0,color:"#000000"},polygon:{nb_sides:5}},opacity:{value:.5,random:!0,anim:{enable:!1,speed:1,opacity_min:.1,sync:!1}},size:{value:30,random:!0,anim:{enable:!1,speed:40,size_min:20,sync:!1}},line_linked:{enable:!1,distance:500,color:"#ffffff",opacity:.4,width:2},move:{enable:!0,speed:.5,direction:"top",random:!1,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:600,rotateY:1200}}},interactivity:{detect_on:"canvas",events:{onhover:{enable:!1,mode:"bubble"},onclick:{enable:!0,mode:"repulse"},resize:!0},modes:{grab:{distance:400,line_linked:{opacity:.5}},bubble:{distance:400,size:4,duration:.3,opacity:1,speed:3},repulse:{distance:200,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}}},retina_detect:!0})}},y=(0,d.Z)(f,[["render",g]]),_=y;var b=a(2778),v=a.n(b);function x(e,t,a,o,l,s){const n=(0,r.up)("q-img"),i=(0,r.up)("q-card-section"),d=(0,r.up)("q-tab"),c=(0,r.up)("q-tabs"),u=(0,r.up)("q-separator"),m=(0,r.up)("router-view"),p=(0,r.up)("q-card");return(0,r.wg)(),(0,r.j4)(p,{class:"my-card",flat:"",bordered:""},{default:(0,r.w5)((()=>[(0,r.Wm)(i,null,{default:(0,r.w5)((()=>[(0,r.Wm)(n,{style:{width:"100px"},src:v()})])),_:1}),(0,r.Wm)(c,{modelValue:l.tab,"onUpdate:modelValue":t[1]||(t[1]=e=>l.tab=e),"active-color":"white",class:"text-teal"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.tabPanels,(e=>((0,r.wg)(),(0,r.j4)(d,{label:e.lable,name:e.name,class:"text",onClick:t[0]||(t[0]=e=>s.changeTab())},null,8,["label","name"])))),256))])),_:1},8,["modelValue"]),(0,r.Wm)(u),(0,r.Wm)(m)])),_:1})}a(9665);function M(e,t,a,o,l,s){const n=(0,r.up)("q-input"),i=(0,r.up)("q-separator"),d=(0,r.up)("q-icon"),c=(0,r.up)("q-card-section"),u=(0,r.up)("q-btn"),m=(0,r.up)("q-card");return(0,r.wg)(),(0,r.j4)(m,{style:{"background-color":"#fafafa"},flat:""},{default:(0,r.w5)((()=>[(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Wm)(n,{filled:"",modelValue:l.name,"onUpdate:modelValue":t[0]||(t[0]=e=>l.name=e),label:"Имя пользователя"},null,8,["modelValue"]),(0,r.Wm)(i),(0,r.Wm)(n,{filled:"",modelValue:l.username,"onUpdate:modelValue":t[1]||(t[1]=e=>l.username=e),label:"Логин"},null,8,["modelValue"]),(0,r.Wm)(i),(0,r.Wm)(n,{filled:"",modelValue:l.password,"onUpdate:modelValue":t[3]||(t[3]=e=>l.password=e),type:l.isPwd?"password":"text",label:"Пароль"},{append:(0,r.w5)((()=>[(0,r.Wm)(d,{name:l.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:t[2]||(t[2]=e=>l.isPwd=!l.isPwd)},null,8,["name"])])),_:1},8,["modelValue","type"]),(0,r.Wm)(i),(0,r.Wm)(n,{filled:"",modelValue:l.password_agan,"onUpdate:modelValue":t[4]||(t[4]=e=>l.password_agan=e),type:l.isPwd?"password":"text",label:"Подтверждение пароля"},null,8,["modelValue","type"])])),_:1}),(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Wm)(u,{flat:"",label:"Зарегистрироваться",onClick:s.register,class:"button"},null,8,["onClick"])])),_:1})])),_:1})}var k=a(1569),D=a(7126),S=a.n(D);const V={data(){return{name:"",username:"",password:"",password_agan:"",isPwd:(0,s.iH)(!0)}},methods:{onError(e){e.response&&e.response.status?this.$q.notify({type:"negative",message:e.response.data.message??"Ошибка при регистрации"}):this.$q.notify({type:"negative",message:"Нет соединения с сервером"})},async register(){if(""!=this.name)if(""!=this.username)if(""!=this.password)if(this.password.length<4)this.$q.notify({type:"negative",message:"Длинна пароля должна ревышать 4 символа!"});else if(""!=this.password_agan)if(this.password_agan==this.password)try{await k.api.post("auth/register",{name:this.name,username:this.username,password:this.password});const e=await k.api.post("auth/login",{username:this.username,password:this.password}),t=e.data.token,a=this.username,o=e.data.name;S().set("token",t,"1h"),S().set("uname",o,"10h"),S().set("login",a,"10h"),S().set("token",t,"1h"),this.$q.notify({type:"positive",message:"Пользователь успешно зарегистрирован и авторизирован"}),this.$router.replace("/")}catch(e){this.onError(e)}else this.$q.notify({type:"negative",message:"Пароли не совпадают!"});else this.$q.notify({type:"negative",message:"Введите пароль повторно!"});else this.$q.notify({type:"negative",message:"Введите пароль!"});else this.$q.notify({type:"negative",message:"Логин не может быть пустым!"});else this.$q.notify({type:"negative",message:"Имя пользователя не указано!"})}}};var W=a(4458),E=a(3190),q=a(6611),U=a(926),C=a(2857),N=a(8879),T=a(9984),z=a.n(T);const j=(0,d.Z)(V,[["render",M],["__scopeId","data-v-0aae4022"]]),L=j;function Z(e,t,a,o,l,s){const n=(0,r.up)("q-input"),i=(0,r.up)("q-separator"),d=(0,r.up)("q-icon"),c=(0,r.up)("q-card-section"),u=(0,r.up)("q-btn"),m=(0,r.up)("q-card");return(0,r.wg)(),(0,r.j4)(m,{style:{"background-color":"#FAFAFA"},flat:""},{default:(0,r.w5)((()=>[(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Wm)(n,{filled:"",modelValue:l.username,"onUpdate:modelValue":t[0]||(t[0]=e=>l.username=e),label:"Логин"},null,8,["modelValue"]),(0,r.Wm)(i),(0,r.Wm)(n,{filled:"",modelValue:l.password,"onUpdate:modelValue":t[2]||(t[2]=e=>l.password=e),type:l.isPwd?"password":"text",label:"Пароль"},{append:(0,r.w5)((()=>[(0,r.Wm)(d,{name:l.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:t[1]||(t[1]=e=>l.isPwd=!l.isPwd)},null,8,["name"])])),_:1},8,["modelValue","type"])])),_:1}),(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Wm)(u,{flat:"",label:"Войти",onClick:s.login,class:"button"},null,8,["onClick"])])),_:1})])),_:1})}z()(V,"components",{QCard:W.Z,QCardSection:E.Z,QInput:q.Z,QSeparator:U.Z,QIcon:C.Z,QBtn:N.Z});const A={data(){return{username:"",password:"",isPwd:(0,s.iH)(!0)}},methods:{onError(e){e.response&&e.response.status?this.$q.notify({type:"negative",message:e.response.data.message??"Ошибка сервера"}):this.$q.notify({type:"negative",message:"Нет соединения с сервером"})},async login(){if(""!=this.username)if(""!=this.password)try{const e=await k.api.post("auth/login",{username:this.username,password:this.password}),t=e.data.token,a=this.username,o=e.data.name;S().set("token",t,"1h"),S().set("uname",o,"10h"),S().set("login",a,"10h"),this.$q.notify({type:"positive",message:"Пользователь успешно авторизован."}),this.$router.replace("/")}catch(e){this.onError(e)}else this.$q.notify({type:"negative",message:"Введите пароль"});else this.$q.notify({type:"negative",message:"Введите логин"})}}},O=(0,d.Z)(A,[["render",Z],["__scopeId","data-v-1dd104d8"]]),I=O;z()(A,"components",{QCard:W.Z,QCardSection:E.Z,QInput:q.Z,QSeparator:U.Z,QIcon:C.Z,QBtn:N.Z});const Q={param:{page:{type:String,default:"login"}},components:{Registr:L,Login:I},data(){return{tab:(0,s.iH)("login"),tabPanels:[{name:"login",lable:"Авторизация"},{name:"registr",lable:"Регистрация"}]}},methods:{changeTab(){this.$router.push({name:this.tab})}},beforeMount(){this.$router.push({name:this.tab})}};var Y=a(335),P=a(7817),F=a(900);const $=(0,d.Z)(Q,[["render",x],["__scopeId","data-v-04c9c49c"]]),B=$;z()(Q,"components",{QCard:W.Z,QCardSection:E.Z,QImg:Y.Z,QTabs:P.Z,QTab:F.Z,QSeparator:U.Z});const H={components:{Authorization:B,Particles:_}},R=(0,d.Z)(H,[["render",h]]),G=R;var J=a(6970),X=a(577),K=a.n(X);const ee={class:"q-pt-md q-pr-md text-h6"};function te(e,t,a,o,l,s){const n=(0,r.up)("particles"),i=(0,r.up)("q-btn"),d=(0,r.up)("q-toolbar-title"),c=(0,r.up)("q-toolbar"),u=(0,r.up)("q-header"),m=(0,r.up)("q-img"),p=(0,r.up)("q-separator"),h=(0,r.up)("q-icon"),w=(0,r.up)("q-item-section"),g=(0,r.up)("q-item"),f=(0,r.up)("q-list"),y=(0,r.up)("q-drawer"),_=(0,r.up)("router-view"),b=(0,r.up)("q-page"),v=(0,r.up)("q-page-container"),x=(0,r.up)("q-layout"),M=(0,r.Q2)("ripple");return(0,r.wg)(),(0,r.j4)(x,{class:"#particles-js",view:"lHh Lpr lFf"},{default:(0,r.w5)((()=>[((0,r.wg)(),(0,r.j4)(n,{key:this.$route.name})),(0,r.Wm)(u,{reveal:"",class:"background"},{default:(0,r.w5)((()=>[(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Wm)(i,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),(0,r.Wm)(d,{class:"text-h5"},{default:(0,r.w5)((()=>[(0,r.Uk)("Личный кабинет")])),_:1}),(0,r._)("p",ee,(0,J.zw)(e.name),1),(0,r.Wm)(i,{onClick:t[0]||(t[0]=t=>e.logout()),flat:"",round:"",icon:"logout"})])),_:1})])),_:1}),(0,r.Wm)(y,{modelValue:e.leftDrawerOpen,"onUpdate:modelValue":t[1]||(t[1]=t=>e.leftDrawerOpen=t),"show-if-above":"",width:250,breakpoint:600},{default:(0,r.w5)((()=>[(0,r.Wm)(f,null,{default:(0,r.w5)((()=>[(0,r.Wm)(m,{class:"q-ma-lg",style:{width:"200px"},src:K()}),(0,r.Wm)(p),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.navigation,((t,a)=>((0,r.wg)(),(0,r.iD)("div",{key:a},[(0,r.wy)(((0,r.wg)(),(0,r.j4)(g,{exact:"",clickable:"",onClick:a=>e.navugate(t.route),active:e.currentRoute==t.route},{default:(0,r.w5)((()=>[(0,r.Wm)(w,{avatar:""},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{name:t.iconName},null,8,["name"])])),_:2},1024),(0,r.Wm)(w,{class:"text-h7"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,J.zw)(t.label),1)])),_:2},1024)])),_:2},1032,["onClick","active"])),[[M]])])))),128))])),_:1})])),_:1},8,["modelValue"]),(0,r.Wm)(v,null,{default:(0,r.w5)((()=>[(0,r.Wm)(b,{style:{margin:"0px 24px 0px 24px"}},{default:(0,r.w5)((()=>[(0,r.Wm)(_)])),_:1})])),_:1})])),_:1})}function ae(e,t,a,o,l,s){const n=(0,r.up)("q-icon"),i=(0,r.up)("q-item-section"),d=(0,r.up)("q-item-label"),c=(0,r.up)("q-item");return(0,r.wg)(),(0,r.j4)(c,{clickable:"",tag:"a",target:"_blank",href:e.link},{default:(0,r.w5)((()=>[e.icon?((0,r.wg)(),(0,r.j4)(i,{key:0,avatar:""},{default:(0,r.w5)((()=>[(0,r.Wm)(n,{name:e.icon},null,8,["name"])])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(i,null,{default:(0,r.w5)((()=>[(0,r.Wm)(d,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,J.zw)(e.title),1)])),_:1}),(0,r.Wm)(d,{caption:""},{default:(0,r.w5)((()=>[(0,r.Uk)((0,J.zw)(e.caption),1)])),_:1})])),_:1})])),_:1},8,["href"])}const oe=(0,r.aZ)({name:"EssentialLink",props:{title:{type:String,required:!0},caption:{type:String,default:""},link:{type:String,default:"#"},icon:{type:String,default:""}}});var le=a(490),se=a(1233),re=a(3115);const ne=(0,d.Z)(oe,[["render",ae]]),ie=ne;z()(oe,"components",{QItem:le.Z,QItemSection:se.Z,QIcon:C.Z,QItemLabel:re.Z});const de=(0,r.aZ)({name:"MainLayout",components:{EssentialLink:ie,Login:B,Particles:_},data(){return{currentRoute:"",navigation:[{label:"Статистика",route:"statistic",iconName:"query_stats",base:!0},{label:"Редактирование данных ",route:"dataedit",iconName:"storage"},{label:"Профиль",route:"profile",iconName:"account_circle"},{label:"Техническая поддержка",route:"techsupport",iconName:"help_outline"}],name:S().get("uname"),token:S().get("token")}},setup(){const e=(0,s.iH)(!1);return{leftDrawerOpen:e,toggleLeftDrawer(){e.value=!e.value}}},methods:{logout(){S().remove("token"),S().remove("uname"),window.location.reload()},navugate(e){this.currentRoute=e,this.$router.push({name:this.currentRoute})},reroute(){S().get("token")||this.$router.replace("/auth")}},beforeMount(){this.reroute(),this.currentRoute=this.navigation[0].route,"/"==this.$router.currentRoute.value.fullPath&&this.$router.push({name:this.currentRoute})},beforeUpdate(){this.reroute(),this.$router.push({name:this.currentRoute})}});var ce=a(7605),ue=a(6602),me=a(1663),pe=a(1973),he=a(906),we=a(3246),ge=a(2133),fe=a(9885),ye=a(1136);const _e=(0,d.Z)(de,[["render",te],["__scopeId","data-v-1f79c4dc"]]),be=_e;z()(de,"components",{QLayout:ce.Z,QHeader:ue.Z,QToolbar:me.Z,QBtn:N.Z,QToolbarTitle:pe.Z,QDrawer:he.Z,QList:we.Z,QImg:Y.Z,QSeparator:U.Z,QItem:le.Z,QItemSection:se.Z,QIcon:C.Z,QPageContainer:ge.Z,QPage:fe.Z}),z()(de,"directives",{Ripple:ye.Z});var ve=a(5342),xe=a.n(ve);const Me=e=>((0,r.dD)("data-v-4f0f22d5"),e=e(),(0,r.Cn)(),e),ke={class:"text-white text-center"},De={class:"absolute-center"},Se=Me((()=>(0,r._)("img",{class:"image",src:xe()},null,-1))),Ve=Me((()=>(0,r._)("div",{class:"text-h2 transparent-text"},[(0,r.Uk)(" Станица, котоую вы ищете "),(0,r._)("br"),(0,r.Uk)(" не существует. ")],-1)));function We(e,t,a,o,l,s){const n=(0,r.up)("particles"),i=(0,r.up)("q-btn");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(n),(0,r._)("div",ke,[(0,r._)("div",De,[Se,Ve,(0,r.Wm)(i,{class:"q-mt-sm text-h6 transparent-text","text-color":"white",unelevated:"",to:"/",label:"Вернуться на главную","no-caps":""})])])],64)}const Ee=(0,r.aZ)({name:"ErrorNotFound",components:{Particles:_}}),qe=(0,d.Z)(Ee,[["render",We],["__scopeId","data-v-4f0f22d5"]]),Ue=qe;function Ce(e,t,a,o,l,s){const n=(0,r.up)("Bar");return(0,r.wg)(),(0,r.j4)(n)}z()(Ee,"components",{QBtn:N.Z});a(6204);var Ne=a(918),Te=a.n(Ne);const ze={class:"text-h5",style:{display:"inline-block","vertical-align":"middle"}},je={style:{display:"inline-block"}};function Le(e,t,a,o,l,s){const n=(0,r.up)("q-icon"),i=(0,r.up)("q-card-section");return(0,r.wg)(),(0,r.j4)(i,null,{default:(0,r.w5)((()=>[(0,r._)("div",ze,(0,J.zw)(a.title),1),(0,r._)("div",je,[(0,r.Wm)(n,{size:"24px",color:"grey-8",style:{"margin-left":"10px"},name:a.iconName},null,8,["name"])])])),_:1})}const Ze={props:{title:String,iconName:String},data(){return{}}},Ae=(0,d.Z)(Ze,[["render",Le]]),Oe=Ae;z()(Ze,"components",{QCardSection:E.Z,QIcon:C.Z});var Ie=a(8505),Qe=a(3725),Ye=a(8140),Pe=a(7929),Fe=a(5946),$e=a(934),Be=a(3935),He=a(5893),Re=a(6273),Ge=a(5657),Je=a(1202),Xe=a(9733),Ke=a(5605),et=a(2060),tt=a(4609),at=a(4835),ot=a(400),lt=a(6996),st=a(2933),rt=a(1823),nt=a(1103),it=a(5213),dt=a(6646);const ct=e=>((0,r.dD)("data-v-7ef0c903"),e=e(),(0,r.Cn)(),e),ut={class:"row"},mt={class:"col-auto"},pt={class:"text-subtitle2"},ht={class:"col-auto"},wt={class:"text-subtitle2"},gt={class:"row"},ft={class:"col-8",style:{display:"flex","flex-direction":"column"}},yt={class:"text-h6 inline"},_t={class:"inline"},bt={key:0,class:"inline"},vt={class:"text-subtitle2"},xt={key:1,style:{display:"flex","justify-content":"center","align-items":"center","flex-grow":"3"}},Mt=ct((()=>(0,r._)("img",{class:"image-center",src:Te()},null,-1))),kt={class:"text-subtitle2"},Dt={class:"col-4",style:{display:"flex","flex-direction":"column","min-width":"300px"}},St=ct((()=>(0,r._)("div",{class:"text-h6 inline"},"Возраст зарегистрированных пользователей",-1))),Vt={key:0,class:"inline"},Wt={class:"text-subtitle2"},Et={key:1,style:{display:"flex","justify-content":"center","align-items":"center","flex-grow":"3"}},qt=ct((()=>(0,r._)("img",{class:"image-center",src:Te()},null,-1))),Ut={class:"text-subtitle2"},Ct={class:"row justify-between"},Nt={class:"col-8",style:{display:"flex","flex-direction":"column"}},Tt={class:"text-h6 inline"},zt={class:"inline"},jt={key:0,class:"inline"},Lt={class:"text-subtitle2"},Zt={key:1,style:{display:"flex","justify-content":"center","align-items":"center","flex-grow":"3"}},At=ct((()=>(0,r._)("img",{class:"image-center",src:Te()},null,-1))),Ot={class:"text-subtitle2"},It={class:"col-4",style:{display:"flex","flex-direction":"column"}},Qt=ct((()=>(0,r._)("div",{class:"text-h6 inline"},"Популярные",-1))),Yt={class:"row justify-between"},Pt={class:"col-5"},Ft={class:"row justify-between"},$t={class:"col-8",style:{display:"flex","flex-direction":"column"}},Bt={class:"text-h6 inline"},Ht={class:"inline"},Rt={key:0,class:"inline"},Gt={class:"text-subtitle2"},Jt={key:1,style:{display:"flex","justify-content":"center","align-items":"center","flex-grow":"3"}},Xt=ct((()=>(0,r._)("img",{class:"image-center",src:Te()},null,-1))),Kt={class:"text-subtitle2"},ea={class:"col-4",style:{display:"flex","flex-direction":"column"}},ta=ct((()=>(0,r._)("div",{class:"text-h6 inline"},"Популярные",-1))),aa={class:"row justify-between"},oa={class:"col-5"},la={class:"row justify-between"},sa={class:"col-8",style:{display:"flex","flex-direction":"column"}},ra={class:"text-h6 inline"},na={class:"inline"},ia={key:0,class:"inline"},da={class:"text-subtitle2"},ca={key:1,style:{display:"flex","justify-content":"center","align-items":"center","flex-grow":"3"}},ua=ct((()=>(0,r._)("img",{class:"image-center",src:Te()},null,-1))),ma={class:"text-subtitle2"},pa={class:"col-4",style:{display:"flex","flex-direction":"column"}},ha=ct((()=>(0,r._)("div",{class:"text-h6 inline"},"Популярные",-1))),wa={class:"row justify-between"},ga={class:"col-5"},fa={components:{Caption:Oe},beforeMount(){this.getAgeParams(),this.getUsers(),this.getDownload(),this.getSchool(),this.getFact(),this.getEvent(),this.getTodayRegUsers(),this.getTodayDownload(),this.downloadOptions.xAxis.data=Object.values(this.mounth),this.schoolOptions.xAxis.data=Object.values(this.mounth),this.factOptions.xAxis.data=Object.values(this.mounth),this.eventOptions.xAxis.data=Object.values(this.mounth)},data(){return{auth:"12GradMapAdmin345SRscx:23pdmtF334slkRDcS5EREc2",mounth:{1:"Январь",2:"Февраль",3:"Март",4:"Апрель",5:"Май",6:"Июнь",7:"Июль",8:"Август",9:"Сентябрь",10:"Октябрь",11:"Ноябрь",12:"Дакабрь"},schools:[],facts:[],events:[],startYear:"2022",ageParams:[],registredUsers:[],countOfRegUsers:0,ageRegData:{tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"horizontal",bottom:0,data:this.ageParams},series:[{name:"",type:"pie",color:["#D794AB","#B678B8","#B284C9","#A395B9","#806FAF"],radius:"70%",center:["50%","40%"],data:[],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 1)"}}}]},downloads:[],downloadOptions:{grid:{top:20,right:40,bottom:80,left:40},legend:{bottom:0,right:0,textStyle:{color:"#676767"}},xAxis:{type:"category",data:[]},yAxis:{type:"value",axisLine:{lineStyle:{color:"grey"},show:!1},axisTick:{show:!1},axisLabel:{color:this.$q.dark.isActive?"white":"#676767"}},series:[],tooltip:{trigger:"axis"}},allYearsSchoolData:[],currentPeriodSchoolData:[],getCountOfSchoolYearWatch:0,schoolOptions:{grid:{top:20,right:40,bottom:80,left:40},legend:{bottom:0,right:0,textStyle:{color:"#676767"}},xAxis:{type:"category",data:[]},yAxis:{type:"value",axisLine:{lineStyle:{color:"grey"},show:!1},axisTick:{show:!1},axisLabel:{color:this.$q.dark.isActive?"white":"#676767"}},series:this.currentPeriodSchoolData,tooltip:{trigger:"axis"}},search:"",schoolCols:[{name:"name",label:"Название школы",align:"left",field:"name",sortable:!0},{name:"view",label:"Просмотры",align:"left",field:"viewCount",sortable:!0}],searchFact:"",allYearsfactData:[],currentPeriodFactData:[],getCountOfFactYearWatch:0,factOptions:{grid:{top:20,right:40,bottom:80,left:40},legend:{bottom:0,right:0,textStyle:{color:"#676767"}},xAxis:{type:"category",data:[]},yAxis:{type:"value",axisLine:{lineStyle:{color:"grey"},show:!1},axisTick:{show:!1},axisLabel:{color:this.$q.dark.isActive?"white":"#676767"}},series:this.currentPeriodSchoolData,tooltip:{trigger:"axis"}},factCols:[{name:"name",label:"Название факта",align:"left",field:"fact_name",sortable:!0},{name:"view",label:"Просмотры",align:"left",field:"viewCount",sortable:!0},{name:"like",label:"Лайки",align:"left",field:"likeCount",sortable:!0}],searchEvent:"",allYearsEventData:[],currentPeriodEventData:[],getCountOfEventYearWatch:0,eventOptions:{grid:{top:20,right:40,bottom:80,left:40},legend:{bottom:0,right:0,textStyle:{color:"#676767"}},xAxis:{type:"category",data:[]},yAxis:{type:"value",axisLine:{lineStyle:{color:"grey"},show:!1},axisTick:{show:!1},axisLabel:{color:this.$q.dark.isActive?"white":"#676767"}},series:this.currentPeriodSchoolData,tooltip:{trigger:"axis"}},eventCols:[{name:"name",label:"Название события",align:"left",field:"name",sortable:!0},{name:"view",label:"Просмотры",align:"left",field:"viewCount",sortable:!0}],todayStats:{downloadCountToday:0,registrationCountToday:0},yearModel:(new Date).getFullYear().toString(),yearModelSchool:(new Date).getFullYear().toString(),yearModelFact:(new Date).getFullYear().toString(),yearModelEvent:(new Date).getFullYear().toString()}},computed:{getYearList(){let e=[],t=(new Date).getFullYear().toString();for(let a=this.startYear;a<=t;a++)e.push(a);return e},getSchoolRows(){return this.getRows(this.schools,this.search)},getFcatRows(){return this.getRows(this.facts,this.searchFact,"fact_name")},getEventRows(){return this.getRows(this.events,this.searchEvent)}},methods:{getRows(e,t,a="name"){if(""!==t){let o=t,l=[];return e.map((function(e){e[a].toString().toLowerCase().includes(o.toString().toLowerCase())&&l.push(e)})),l}return e},exportTable(e,t){const a=[e.map((e=>this.wrapCsvValue(e.label)))].concat(t.map((t=>e.map((e=>this.wrapCsvValue("function"===typeof e.field?e.field(t):t[void 0===e.field?e.name:e.field],e.format,t))).join(",")))).join("\r\n"),o=(0,dt.Z)("table-export.csv",a,"text/csv");!0!==o&&$q.notify({message:"Ошибка загрузки",color:"negative",icon:"warning"})},wrapCsvValue(e,t){let a=void 0!==t?t(e):e;return a=void 0===a||null===a?"":String(a),a=a.split('"').join('""'),`"${a}"`},async getAgeParams(){try{const e=await k.api.get("auth/getAgeParams");this.rows=e.data,this.ageParams=e.data.ageParams}catch(e){this.onError(e)}},formDataForPie(){this.countOfRegUsers=0;let e=[];this.ageParams.forEach((t=>{e.push({value:0,name:t})})),this.registredUsers.forEach((t=>{let a=this.ageParams.indexOf(t.age);-1!=a&&(e[a].value++,this.countOfRegUsers++)}));let t=!0;return e.forEach((e=>{0!=e.value&&(t=!1)})),t&&(e=[]),e},async getUsers(){let e=Number("все время"==this.yearModel?this.startYear:this.yearModel)-1,t=Number("все время"==this.yearModel?(new Date).getFullYear().toString():this.yearModel)+1,a=e+"-12-31",o=t+"-01-01";try{const e=await k.api.post("auth/getCreated",{start:a,end:o},{headers:{Authorization:"Bearer "+S().get("token")}});this.registredUsers=e.data,this.ageRegData.series[0].data=this.formDataForPie()}catch(l){this.onError(l)}},async getTodayRegUsers(){let e=new Date,t=String(e.getDate()-1).padStart(2,"0"),a=String(e.getDate()+1).padStart(2,"0"),o=String(e.getMonth()+1).padStart(2,"0"),l=e.getFullYear();try{const e=await k.api.post("auth/getCreated",{start:`${l}-${o}-${t}`,end:`${l}-${o}-${a}`},{headers:{Authorization:"Bearer "+S().get("token")}});this.todayStats.registrationCountToday=e.data.length}catch(s){this.onError(s)}},async getTodayDownload(){let e=new Date,t=String(e.getDate()-1).padStart(2,"0"),a=String(e.getDate()+1).padStart(2,"0"),o=String(e.getMonth()+1).padStart(2,"0"),l=e.getFullYear();try{const e=await k.api.post("api/user/getCreated/",{start:`${l}-${o}-${t}`,end:`${l}-${o}-${a}`},{headers:{Authorization:"Basic "+btoa(this.auth),"x-requested-with":"*"}});this.todayStats.downloadCountToday=e.data.length}catch(s){this.onError(s)}},async getDownload(){let e=Number("все время"==this.yearModel?this.startYear:this.yearModel)-1,t=Number("все время"==this.yearModel?(new Date).getFullYear().toString():this.yearModel)+1,a=e+"-12-31",o=t+"-01-01";try{const l=await k.api.post("api/user/getCreated/",{start:a,end:o},{headers:{Authorization:"Basic "+btoa(this.auth),"x-requested-with":"*"}});this.downloads=l.data,this.downloadOptions.series=this.formDownloadDataForGraph(e+1,t-1)}catch(l){this.onError(l)}},formDownloadDataForGraph(e,t){let a=[],o=[];for(let s=e;s<=t;s++)a.push(s.toString()),o.push({year:s.toString(),values:[0,0,0,0,0,0,0,0,0,0,0,0]});this.downloads.forEach((e=>{let t=e.create_date.split("-"),l=a.indexOf(t[0].toString());-1!=l&&o[l].values[Number(t[1])-1]++}));let l=[];return o.forEach((e=>{l.push({name:e.year,data:e.values,type:"bar",color:"#806FAF",smooth:!0})})),l},async getSchool(){try{const e=await k.api.get("api/school",{headers:{Authorization:"Basic "+btoa(this.auth),"x-requested-with":"*"}});let t=e.data;t.forEach((e=>{if(null==e.views)e.views=[],e["viewCount"]=0;else{let t=[];Object.values(e.views).forEach((e=>{t.push(e.views[0])})),e.views=t,e["viewCount"]=t.length}})),this.schools=t,this.allYearsSchoolData=this.getSchoolsInPeriodDiagramm(),this.currentPeriodSchoolData=this.setSchoolsCurrent(),this.schoolOptions.series=this.currentPeriodSchoolData}catch(e){this.onError(e)}},getSchoolsInPeriodDiagramm(){let e=(new Date).getFullYear().toString(),t=Number(this.startYear)-1,a=Number(e)+1,o=t+"-12-31",l=a+"-01-01",s=new Date(o),r=new Date(l),n=[],i=[];for(let c=this.startYear;c<=e;c++)i.push(c.toString()),n.push({year:c.toString(),values:[0,0,0,0,0,0,0,0,0,0,0,0]});this.schools.forEach((e=>{e.views.forEach((e=>{let t=new Date(e);if(t>s&&t<r){let t=e.split("-"),a=i.indexOf(t[0].toString());-1!=a&&n[a].values[Number(t[1])-1]++}}))}));let d=[];return n.forEach((e=>{d.push({name:e.year,data:e.values,type:"bar",color:"#806FAF",smooth:!0})})),d},setSchoolsCurrent(){let e=[];this.allYearsSchoolData.forEach((t=>{t.name==this.yearModelSchool&&e.push(t)}));let t=0;return e[0].data.forEach((e=>{t+=e})),this.getCountOfSchoolYearWatch=t,e},async getFact(){try{const e=await k.api.get("api/fact",{headers:{Authorization:"Basic "+btoa(this.auth),"x-requested-with":"*"}});let t=e.data;t.forEach((e=>{let t=0;if(e["viewCount"]=0,null==e.views)e.views=[];else{let a=[];Object.values(e.views).forEach((e=>{a.push(e.views[0]),e.like&&t++})),e.views=a,e["viewCount"]=a.length}e["likeCount"]=t})),this.facts=t,this.allYearsfactData=this.getFactsInPeriodDiagramm(),this.currentPeriodFactData=this.setFactsCurrent(),this.factOptions.series=this.currentPeriodFactData}catch(e){this.onError(e)}},getFactsInPeriodDiagramm(){let e=(new Date).getFullYear().toString(),t=Number(this.startYear)-1,a=Number(e)+1,o=t+"-12-31",l=a+"-01-01",s=new Date(o),r=new Date(l),n=[],i=[];for(let c=this.startYear;c<=e;c++)i.push(c.toString()),n.push({year:c.toString(),values:[0,0,0,0,0,0,0,0,0,0,0,0]});this.facts.forEach((e=>{e.views.forEach((e=>{let t=new Date(e);if(t>s&&t<r){let t=e.split("-"),a=i.indexOf(t[0].toString());-1!=a&&n[a].values[Number(t[1])-1]++}}))}));let d=[];return n.forEach((e=>{d.push({name:e.year,data:e.values,type:"bar",color:"#806FAF",smooth:!0})})),d},setFactsCurrent(){let e=[];this.allYearsfactData.forEach((t=>{t.name==this.yearModelFact&&e.push(t)}));let t=0;return e[0].data.forEach((e=>{t+=e})),this.getCountOfFactYearWatch=t,e},async getEvent(){try{const e=await k.api.get("api/event",{headers:{Authorization:"Basic "+btoa(this.auth),"x-requested-with":"*"}});let t=e.data;t.forEach((e=>{if(e["viewCount"]=0,null==e.views)e.views=[];else{let t=[];Object.values(e.views).forEach((e=>{t.push(e.views[0]),e.like&&0})),e.views=t,e["viewCount"]=t.length}})),this.events=t,this.allYearsEventData=this.getEventInPeriodDiagramm(),this.currentPeriodEventData=this.setEventsCurrent(),this.eventOptions.series=this.currentPeriodEventData}catch(e){this.onError(e)}},getEventInPeriodDiagramm(){let e=(new Date).getFullYear().toString(),t=Number(this.startYear)-1,a=Number(e)+1,o=t+"-12-31",l=a+"-01-01",s=new Date(o),r=new Date(l),n=[],i=[];for(let c=this.startYear;c<=e;c++)i.push(c.toString()),n.push({year:c.toString(),values:[0,0,0,0,0,0,0,0,0,0,0,0]});this.events.forEach((e=>{e.views.forEach((e=>{let t=new Date(e);if(t>s&&t<r){let t=e.split("-"),a=i.indexOf(t[0].toString());-1!=a&&n[a].values[Number(t[1])-1]++}}))}));let d=[];return n.forEach((e=>{d.push({name:e.year,data:e.values,type:"bar",color:"#806FAF",smooth:!0})})),d},setEventsCurrent(){let e=[];this.allYearsEventData.forEach((t=>{t.name==this.yearModelEvent&&e.push(t)}));let t=0;return e[0].data.forEach((e=>{t+=e})),this.getCountOfEventYearWatch=t,e},onError(e){this.loaded=!0,e.response&&e.response.status?(this.error=e.response.status,403!=this.error&&this.$q.notify({type:"negative",message:e.response.data.message??"Ошибка сервера"})):this.$q.notify({type:"negative",message:"Нет соединения с сервером"})},changeDownloadData(){this.getUsers(),this.getDownload(),this.schoolOptions.series=[]},changeSchoolData(){this.currentPeriodSchoolData=this.setSchoolsCurrent(),this.schoolOptions.series=this.currentPeriodSchoolData},changeFectData(){this.currentPeriodFactData=this.setFactsCurrent(),this.factOptions.series=this.currentPeriodFactData},changeEventData(){this.currentPeriodEventData=this.setEventsCurrent(),this.eventOptions.series=this.currentPeriodEventData},SaveImage(e){const t=this.$refs[e].getDataURL(),a=document.createElement("a");document.body.appendChild(a),a.href=t,a.target="_self",a.download=e+".png",a.click()}}},ya=Object.assign(fa,{__name:"BarChart",setup(e){return(0,Ie.D)([Pe.N,Fe.N,$e.N,Be.N,He.N,Re.N,Ge.N,Je.N,Xe.N,Ke.N,et.N,tt.N,at.N,ot.N,lt.N,st.N,Qe.N,Ye.N,rt.N,nt.N]),(0,r.JJ)(it.bw,"light"),(e,t)=>{const a=(0,r.up)("q-separator"),o=(0,r.up)("q-card-section"),l=(0,r.up)("q-select"),n=(0,r.up)("q-tooltip"),i=(0,r.up)("q-btn"),d=(0,r.up)("q-card"),c=(0,r.up)("q-icon"),u=(0,r.up)("q-input"),m=(0,r.up)("q-table");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(d,{class:"shadow-15 block",style:{"border-radius":"14px"}},{default:(0,r.w5)((()=>[(0,r.Wm)(Oe,{title:"Скачивания приложения","icon-name":"add_reaction"}),(0,r.Wm)(o,{style:{"padding-top":"0px"}},{default:(0,r.w5)((()=>[(0,r._)("div",ut,[(0,r._)("div",mt,[(0,r._)("div",pt,"Скачиваний сегодня: "+(0,J.zw)(e.todayStats.downloadCountToday),1)]),(0,r.Wm)(a,{class:"q-mr-lg q-ml-lg",vertical:"",inset:""}),(0,r._)("div",ht,[(0,r._)("div",wt,"Регистраций сегодня: "+(0,J.zw)(e.todayStats.registrationCountToday),1)])])])),_:1}),(0,r.Wm)(o,null,{default:(0,r.w5)((()=>[(0,r._)("div",gt,[(0,r._)("div",ft,[(0,r._)("div",null,[(0,r._)("div",yt,[(0,r.Uk)("Динамика скачивания приложения за "),(0,r._)("div",_t,[(0,r.Wm)(l,{class:"inline",style:{"margin-left":"24px"},borderless:"",modelValue:e.yearModel,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.yearModel=t),e.changeDownloadData],modelModifiers:{lazy:!0},options:e.getYearList},null,8,["modelValue","onUpdate:modelValue","options"])])]),e.downloads.length>0?((0,r.wg)(),(0,r.iD)("div",bt,[(0,r.Wm)(i,{flat:"",dense:"",icon:"download",size:"m",class:"mr-10",onClick:t[1]||(t[1]=t=>e.SaveImage("downloads")),color:"grey-8"},{default:(0,r.w5)((()=>[(0,r.Wm)(n,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Скачать")])),_:1})])),_:1})])):(0,r.kq)("",!0)]),(0,r._)("div",vt,"Всего скачиваний за "+(0,J.zw)(e.yearModel)+": "+(0,J.zw)(e.downloads.length),1),e.downloads.length>0?((0,r.wg)(),(0,r.j4)((0,s.SU)(it.ZP),{key:0,class:"chart",ref:"downloads",option:e.downloadOptions,autoresize:"",style:{}},null,8,["option"])):((0,r.wg)(),(0,r.iD)("div",xt,[(0,r._)("div",null,[Mt,(0,r._)("div",kt,"За "+(0,J.zw)(e.yearModel)+" данных не обнаружено ",1)])]))]),(0,r._)("div",Dt,[(0,r._)("div",null,[St,e.ageRegData.series[0].data.length>0?((0,r.wg)(),(0,r.iD)("div",Vt,[(0,r.Wm)(i,{flat:"",dense:"",icon:"download",size:"m",class:"q-pl-md",onClick:t[2]||(t[2]=t=>e.SaveImage("age")),color:"grey-8"},{default:(0,r.w5)((()=>[(0,r.Wm)(n,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Скачать")])),_:1})])),_:1})])):(0,r.kq)("",!0)]),(0,r._)("div",Wt,"Всего регистраций за "+(0,J.zw)(e.yearModel)+": "+(0,J.zw)(e.countOfRegUsers),1),e.ageRegData.series[0].data.length>0?((0,r.wg)(),(0,r.j4)((0,s.SU)(it.ZP),{class:"chart",ref:"age",option:e.ageRegData,key:Math.random(1e3),autoresize:""},null,8,["option"])):((0,r.wg)(),(0,r.iD)("div",Et,[(0,r._)("div",null,[qt,(0,r._)("div",Ut,"За "+(0,J.zw)(e.yearModel)+" данных не обнаружено ",1)])]))])])])),_:1})])),_:1}),(0,r.Wm)(d,{class:"shadow-15 block",style:{"border-radius":"14px"}},{default:(0,r.w5)((()=>[(0,r.Wm)(Oe,{title:"Школы","icon-name":"school"}),(0,r.Wm)(o,null,{default:(0,r.w5)((()=>[(0,r._)("div",Ct,[(0,r._)("div",Nt,[(0,r._)("div",null,[(0,r._)("div",Tt,[(0,r.Uk)("Динамика просмотра школ за "),(0,r._)("div",zt,[(0,r.Wm)(l,{class:"inline",style:{"margin-left":"24px"},borderless:"",modelValue:e.yearModelSchool,"onUpdate:modelValue":[t[3]||(t[3]=t=>e.yearModelSchool=t),e.changeSchoolData],modelModifiers:{lazy:!0},options:e.getYearList},null,8,["modelValue","onUpdate:modelValue","options"])])]),e.currentPeriodSchoolData.length>0?((0,r.wg)(),(0,r.iD)("div",jt,[(0,r.Wm)(i,{flat:"",dense:"",icon:"download",size:"m",class:"mr-10",onClick:t[4]||(t[4]=t=>e.SaveImage("schools")),color:"grey-8"},{default:(0,r.w5)((()=>[(0,r.Wm)(n,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Скачать")])),_:1})])),_:1})])):(0,r.kq)("",!0)]),(0,r._)("div",Lt,"Всего за "+(0,J.zw)(e.yearModelSchool)+" : "+(0,J.zw)(e.getCountOfSchoolYearWatch),1),e.currentPeriodSchoolData.length>0?((0,r.wg)(),(0,r.j4)((0,s.SU)(it.ZP),{key:0,class:"chart",ref:"schools",autoresize:"",option:e.schoolOptions},null,8,["option"])):((0,r.wg)(),(0,r.iD)("div",Zt,[(0,r._)("div",null,[At,(0,r._)("div",Ot,"За "+(0,J.zw)(e.yearModelSchool)+" данных не обнаружено ",1)])]))]),(0,r._)("div",It,[(0,r._)("div",null,[Qt,(0,r.Wm)(i,{flat:"",class:"inline",color:"grey-8",icon:"download",label:"CSV","no-caps":"",onClick:t[5]||(t[5]=t=>e.exportTable(e.schoolCols,e.schoolRows))},{default:(0,r.w5)((()=>[(0,r.Wm)(n,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Экспортировать в CSV")])),_:1})])),_:1})]),(0,r._)("div",Yt,[(0,r._)("div",Pt,[(0,r.Wm)(u,{style:{"padding-bottom":"0px"},"bottom-slots":"",borderless:"",modelValue:e.search,"onUpdate:modelValue":t[6]||(t[6]=t=>e.search=t),label:"Поиск по названию"},{prepend:(0,r.w5)((()=>[(0,r.Wm)(c,{name:"search"})])),_:1},8,["modelValue"])])]),(0,r.Wm)(a),(0,r.Wm)(m,{flat:"",borderless:"",separator:"cell","row-key":"name",rows:e.getSchoolRows,columns:e.schoolCols,color:"primary","no-data-label":"Ничего не найдено"},null,8,["rows","columns"])])])])),_:1})])),_:1}),(0,r.Wm)(d,{class:"shadow-15 block",style:{"border-radius":"14px"}},{default:(0,r.w5)((()=>[(0,r.Wm)(Oe,{title:"Факты","icon-name":"school"}),(0,r.Wm)(o,null,{default:(0,r.w5)((()=>[(0,r._)("div",Ft,[(0,r._)("div",$t,[(0,r._)("div",null,[(0,r._)("div",Bt,[(0,r.Uk)("Динамика просмотра фактов за "),(0,r._)("div",Ht,[(0,r.Wm)(l,{class:"inline",style:{"margin-left":"24px"},borderless:"",modelValue:e.yearModelFact,"onUpdate:modelValue":[t[7]||(t[7]=t=>e.yearModelFact=t),e.changeFectData],modelModifiers:{lazy:!0},options:e.getYearList},null,8,["modelValue","onUpdate:modelValue","options"])])]),e.currentPeriodFactData.length>0?((0,r.wg)(),(0,r.iD)("div",Rt,[(0,r.Wm)(i,{flat:"",dense:"",icon:"download",size:"m",class:"mr-10",onClick:t[8]||(t[8]=t=>e.SaveImage("facts")),color:"grey-8"},{default:(0,r.w5)((()=>[(0,r.Wm)(n,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Скачать")])),_:1})])),_:1})])):(0,r.kq)("",!0)]),(0,r._)("div",Gt,"Всего за "+(0,J.zw)(e.yearModelFact)+" : "+(0,J.zw)(e.getCountOfFactYearWatch),1),e.currentPeriodFactData.length>0?((0,r.wg)(),(0,r.j4)((0,s.SU)(it.ZP),{key:0,class:"chart",ref:"facts",autoresize:"",option:e.factOptions},null,8,["option"])):((0,r.wg)(),(0,r.iD)("div",Jt,[(0,r._)("div",null,[Xt,(0,r._)("div",Kt,"За "+(0,J.zw)(e.yearModelFact)+" данных не обнаружено ",1)])]))]),(0,r._)("div",ea,[(0,r._)("div",null,[ta,(0,r.Wm)(i,{flat:"",class:"inline",color:"grey-8",icon:"download",label:"CSV","no-caps":"",onClick:t[9]||(t[9]=t=>e.exportTable(e.factCols,e.facts))},{default:(0,r.w5)((()=>[(0,r.Wm)(n,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Экспортировать в CSV")])),_:1})])),_:1})]),(0,r._)("div",aa,[(0,r._)("div",oa,[(0,r.Wm)(u,{style:{"padding-bottom":"0px"},"bottom-slots":"",borderless:"",modelValue:e.searchFact,"onUpdate:modelValue":t[10]||(t[10]=t=>e.searchFact=t),label:"Поиск по названию"},{prepend:(0,r.w5)((()=>[(0,r.Wm)(c,{name:"search"})])),_:1},8,["modelValue"])])]),(0,r.Wm)(a),(0,r.Wm)(m,{flat:"",borderless:"",separator:"cell","row-key":"name",rows:e.getFcatRows,columns:e.factCols,color:"primary","no-data-label":"Ничего не найдено"},null,8,["rows","columns"])])])])),_:1})])),_:1}),(0,r.Wm)(d,{class:"shadow-15 block",style:{"border-radius":"14px"}},{default:(0,r.w5)((()=>[(0,r.Wm)(Oe,{title:"Факты","icon-name":"school"}),(0,r.Wm)(o,null,{default:(0,r.w5)((()=>[(0,r._)("div",la,[(0,r._)("div",sa,[(0,r._)("div",null,[(0,r._)("div",ra,[(0,r.Uk)("Динамика просмотра событий за "),(0,r._)("div",na,[(0,r.Wm)(l,{class:"inline",style:{"margin-left":"24px"},borderless:"",modelValue:e.yearModelEvent,"onUpdate:modelValue":[t[11]||(t[11]=t=>e.yearModelEvent=t),e.changeEventData],modelModifiers:{lazy:!0},options:e.getYearList},null,8,["modelValue","onUpdate:modelValue","options"])])]),e.currentPeriodEventData.length>0?((0,r.wg)(),(0,r.iD)("div",ia,[(0,r.Wm)(i,{flat:"",dense:"",icon:"download",size:"m",class:"mr-10",onClick:t[12]||(t[12]=t=>e.SaveImage("events")),color:"grey-8"},{default:(0,r.w5)((()=>[(0,r.Wm)(n,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Скачать")])),_:1})])),_:1})])):(0,r.kq)("",!0)]),(0,r._)("div",da,"Всего за "+(0,J.zw)(e.yearModelEvent)+" : "+(0,J.zw)(e.getCountOfEventYearWatch),1),e.currentPeriodEventData.length>0?((0,r.wg)(),(0,r.j4)((0,s.SU)(it.ZP),{key:0,class:"chart",ref:"events",autoresize:"",option:e.eventOptions},null,8,["option"])):((0,r.wg)(),(0,r.iD)("div",ca,[(0,r._)("div",null,[ua,(0,r._)("div",ma,"За "+(0,J.zw)(e.yearModelEvent)+" данных не обнаружено ",1)])]))]),(0,r._)("div",pa,[(0,r._)("div",null,[ha,(0,r.Wm)(i,{flat:"",class:"inline",color:"grey-8",icon:"download",label:"CSV","no-caps":"",onClick:t[13]||(t[13]=t=>e.exportTable(e.eventCols,e.events))},{default:(0,r.w5)((()=>[(0,r.Wm)(n,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Экспортировать в CSV")])),_:1})])),_:1})]),(0,r._)("div",wa,[(0,r._)("div",ga,[(0,r.Wm)(u,{style:{"padding-bottom":"0px"},"bottom-slots":"",borderless:"",modelValue:e.searchEvent,"onUpdate:modelValue":t[14]||(t[14]=t=>e.searchEvent=t),label:"Поиск по названию"},{prepend:(0,r.w5)((()=>[(0,r.Wm)(c,{name:"search"})])),_:1},8,["modelValue"])])]),(0,r.Wm)(a),(0,r.Wm)(m,{flat:"",borderless:"",separator:"cell","row-key":"name",rows:e.getEventRows,columns:e.eventCols,color:"primary","no-data-label":"Ничего не найдено"},null,8,["rows","columns"])])])])),_:1})])),_:1})],64)}}});var _a=a(7887),ba=a(6858),va=a(1227);const xa=(0,d.Z)(ya,[["__scopeId","data-v-7ef0c903"]]),Ma=xa;z()(ya,"components",{QCard:W.Z,QCardSection:E.Z,QSeparator:U.Z,QSelect:_a.Z,QBtn:N.Z,QTooltip:ba.Z,QInput:q.Z,QIcon:C.Z,QTable:va.Z});const ka={components:{Bar:Ma},data(){return{username:"",text:"",regis:!1}},methods:{}},Da=(0,d.Z)(ka,[["render",Ce]]),Sa=Da;function Va(e,t,a,o,l,s){const n=(0,r.up)("q-select"),i=(0,r.up)("q-card-section"),d=(0,r.up)("roles"),c=(0,r.up)("users"),u=(0,r.up)("facts"),m=(0,r.up)("event"),p=(0,r.up)("school"),h=(0,r.up)("q-card");return(0,r.wg)(),(0,r.j4)(h,null,{default:(0,r.w5)((()=>[(0,r.Wm)(i,null,{default:(0,r.w5)((()=>[(0,r.Wm)(n,{modelValue:l.selectedTable,"onUpdate:modelValue":t[0]||(t[0]=e=>l.selectedTable=e),options:l.tableOptions,label:"Выберите таблицу, которую хотите отредактировать"},null,8,["modelValue","options"])])),_:1}),(0,r.Wm)(i,null,{default:(0,r.w5)((()=>["Роли"===l.selectedTable?((0,r.wg)(),(0,r.j4)(d,{key:0})):(0,r.kq)("",!0),"Пользователи"===l.selectedTable?((0,r.wg)(),(0,r.j4)(c,{key:1})):(0,r.kq)("",!0),"Факты"===l.selectedTable?((0,r.wg)(),(0,r.j4)(u,{key:2})):(0,r.kq)("",!0),"Мероприятия"===l.selectedTable?((0,r.wg)(),(0,r.j4)(m,{key:3})):(0,r.kq)("",!0),"Школы"===l.selectedTable?((0,r.wg)(),(0,r.j4)(p,{key:4})):(0,r.kq)("",!0)])),_:1})])),_:1})}var Wa=a(2796),Ea=a.n(Wa);const qa=e=>((0,r.dD)("data-v-7697f4d8"),e=e(),(0,r.Cn)(),e),Ua={key:1},Ca={class:"row"},Na={class:"col-3"},Ta={class:"col-2"},za={key:2,class:"text-center"},ja=qa((()=>(0,r._)("div",{class:"text-h4",style:{opacity:"0.5"}},"У вас нет прав",-1))),La=qa((()=>(0,r._)("img",{class:"image",src:Ea()},null,-1))),Za=[ja,La];function Aa(e,t,a,o,l,s){const n=(0,r.up)("q-spinner-ball"),i=(0,r.up)("q-icon"),d=(0,r.up)("q-input"),c=(0,r.up)("q-select"),u=(0,r.up)("q-separator"),m=(0,r.up)("q-th"),p=(0,r.up)("q-popup-edit"),h=(0,r.up)("q-td"),w=(0,r.up)("q-tooltip"),g=(0,r.up)("q-btn"),f=(0,r.up)("q-tr"),y=(0,r.up)("q-table");return(0,r.wg)(),(0,r.iD)("div",null,[l.loaded?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(n,{key:0,class:"fixed-center",size:"5rem",color:"white",thickness:3})),l.loaded&&!l.error?((0,r.wg)(),(0,r.iD)("div",Ua,[(0,r._)("div",Ca,[(0,r._)("div",Na,[(0,r.Wm)(d,{style:{"padding-bottom":"0px"},"bottom-slots":"",borderless:"",modelValue:l.text,"onUpdate:modelValue":t[0]||(t[0]=e=>l.text=e),label:"Поиск"},{prepend:(0,r.w5)((()=>[(0,r.Wm)(i,{name:"search"})])),_:1},8,["modelValue"])]),(0,r._)("div",Ta,[(0,r.Wm)(c,{borderless:"",modelValue:this.searchSelected,"onUpdate:modelValue":t[1]||(t[1]=e=>this.searchSelected=e),options:s.getSearchParamsArray},null,8,["modelValue","options"])])]),(0,r.Wm)(u),(0,r.Wm)(y,{flat:"",borderless:"",separator:"cell",rows:s.getRows,columns:l.columns,"row-key":"name","no-data-label":"Ничего не найдено"},{"header-cell":(0,r.w5)((e=>[(0,r.Wm)(m,{props:e},{default:(0,r.w5)((()=>[e.col.canEdit?((0,r.wg)(),(0,r.j4)(i,{key:0,name:"lock_open",size:"1.5em"})):null!=e.col.canEdit?((0,r.wg)(),(0,r.j4)(i,{key:1,name:"lock",size:"1.5em"})):(0,r.kq)("",!0),(0,r.Uk)(" "+(0,J.zw)(e.col.label),1)])),_:2},1032,["props"])])),body:(0,r.w5)((e=>[(0,r.Wm)(f,{props:e},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{key:"name",props:e},{default:(0,r.w5)((()=>[(0,r._)("div",null,(0,J.zw)(e.row.name),1),(0,r.Wm)(p,{modelValue:e.row.name,"onUpdate:modelValue":t=>e.row.name=t,onHide:t=>s.changeName(e.row._id,e.row.name,e.row.username)},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{type:"textarea",modelValue:e.row.name,"onUpdate:modelValue":t=>e.row.name=t,label:"Новое имя пользователя"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["modelValue","onUpdate:modelValue","onHide"])])),_:2},1032,["props"]),(0,r.Wm)(h,{key:"username",props:e},{default:(0,r.w5)((()=>[(0,r._)("div",null,(0,J.zw)(e.row.username),1)])),_:2},1032,["props"]),(0,r.Wm)(h,{key:"registrDate",props:e},{default:(0,r.w5)((()=>[(0,r._)("div",null,(0,J.zw)(new Date(e.row.registrDate).toLocaleString("ru-RU",{timeZone:"Europe/Moscow"})),1)])),_:2},1032,["props"]),(0,r.Wm)(h,{key:"roles",props:e},{default:(0,r.w5)((()=>[(0,r._)("div",null,(0,J.zw)(e.row.roles),1),(0,r.Wm)(p,{modelValue:e.row.roles,"onUpdate:modelValue":t=>e.row.roles=t,onHide:t=>s.changeRole(e.row._id,e.row.roles,e.row.username)},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{modelValue:e.row.roles,"onUpdate:modelValue":t=>e.row.roles=t,options:l.roles,label:"Роль"},null,8,["modelValue","onUpdate:modelValue","options"])])),_:2},1032,["modelValue","onUpdate:modelValue","onHide"])])),_:2},1032,["props"]),(0,r.Wm)(h,{key:"password"},{default:(0,r.w5)((()=>[(0,r.Wm)(g,{flat:"",dense:"",color:"grey-8"},{default:(0,r.w5)((()=>[(0,r.Wm)(i,{name:"edit"}),(0,r.Wm)(p,{modelValue:e.row.roles,"onUpdate:modelValue":t=>e.row.roles=t,onHide:t=>s.changeUserPass(e.row._id,l.newPass)},{default:(0,r.w5)((e=>[(0,r.Wm)(d,{modelValue:l.newPass,"onUpdate:modelValue":t[3]||(t[3]=e=>l.newPass=e),type:l.isPwd?"password":"text",hint:"Новый пароль"},{append:(0,r.w5)((()=>[(0,r.Wm)(i,{name:l.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:t[2]||(t[2]=e=>l.isPwd=!l.isPwd)},null,8,["name"])])),_:1},8,["modelValue","type"])])),_:2},1032,["modelValue","onUpdate:modelValue","onHide"]),(0,r.Wm)(w,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Изменить пароль")])),_:1})])),_:2},1024)])),_:2},1024),(0,r.Wm)(h,{key:"control"},{default:(0,r.w5)((()=>[(0,r.Wm)(g,{onClick:t=>s.removeUser(e.row._id,e.row.username),flat:"",dense:"",color:"grey-8"},{default:(0,r.w5)((()=>[(0,r.Wm)(i,{name:"delete_forever"}),(0,r.Wm)(w,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Удалить")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["rows","columns"])])):(0,r.kq)("",!0),403==l.error?((0,r.wg)(),(0,r.iD)("div",za,Za)):(0,r.kq)("",!0)])}const Oa={data(){return{searchSelected:"",newPass:"",text:"",isPwd:(0,s.iH)(!0),roles:[],columns:[{name:"name",label:"Имя пользователя",align:"left",field:"name",canEdit:!0,sortable:!0},{name:"username",label:"Логин",align:"left",field:"username",canEdit:!1,sortable:!0},{name:"registrDate",align:"left",label:"Дата регистрации",field:"registrDate",canEdit:!1,sortable:!0},{name:"roles",align:"left",label:"Роль",field:"roles",canEdit:!0,sortable:!0},{name:"password",align:"left",label:"Пароль",canEdit:!0},{name:"control",align:"left",label:"Управление"}],rows:[],error:0,loaded:!1,password:(0,s.iH)(""),isPwd:(0,s.iH)(!0)}},mounted(){this.getUsers(),this.getRolesArray(),this.searchSelected=this.getSearchParamsArray[0]},methods:{async getUsers(){this.loaded=!1,this.error=0;try{const e=await k.api.get("auth/users",{headers:{Authorization:"Bearer "+S().get("token")}});this.rows=e.data,this.rows.forEach((e=>{e.roles=e.roles[0]})),this.loaded=!0}catch(e){this.onError(e)}},async changeRole(e,t,a){try{await k.api.put("auth/updateRole",{id:e,newRole:t}),this.$q.notify({type:"positive",message:"Роль пользователя сохранена"}),S().get("login")==a&&(S().remove("token"),window.location.reload())}catch(o){this.onError(o)}},async changeName(e,t,a){if(""!=t)try{await k.api.put("auth/updateUserName",{id:e,name:t});this.$q.notify({type:"positive",message:"Имя пользователя сохранено"}),a==S().get("login")&&(S().set("uname",t,"10h"),window.location.reload())}catch(o){this.onError(o)}else this.$q.notify({type:"negative",message:"Имя пользователя не может быть пустым"})},async getRolesArray(){this.loaded=!1,this.error=0;try{const e=await k.api.get("auth/roles",{headers:{Authorization:"Bearer "+S().get("token")}});this.roles=e.data.map((e=>e.value)),this.loaded=!0}catch(e){this.onError(e)}},onError(e){this.loaded=!0,e.response&&e.response.status?(this.error=e.response.status,403!=this.error&&this.$q.notify({type:"negative",message:e.response.data.message??"Ошибка сервера"})):this.$q.notify({type:"negative",message:"Нет соединения с сервером"})},async removeUser(e,t){try{await k.api.post("auth/delete",{id:e},{headers:{Authorization:"Bearer "+S().get("token")}});this.loaded=!0,t==S().get("login")&&(S().remove("token"),S().remove("uname"),window.location.reload()),this.$q.notify({type:"positive",message:"Пользователь удален"}),this.getUsers()}catch(a){this.onError(a)}},async changeUserPass(e,t){if(""==t||t.length<4)this.$q.notify({type:"negative",message:"Новый пароль должен быть более 3 символов"});else try{await k.api.put("auth/updatePass",{id:e,newPass:t});this.loaded=!0,this.$q.notify({type:"positive",message:"Пароль изменен"})}catch(a){this.onError(a)}}},computed:{getRows(){if(""!==this.text){let e,t=this.text,a=[];this.columns.forEach((t=>{t.label==this.searchSelected&&(e=t.field)}));let o=e.split(".");return this.rows.map((function(e){let l=e[o[0]];for(let t=1;t<o.length;t++)l=l[o[t]];"object"==typeof l?l.forEach((o=>{o.toString().toLowerCase().includes(t.toString().toLowerCase())&&a.push(e)})):l.toString().toLowerCase().includes(t.toString().toLowerCase())&&a.push(e)})),a}return this.rows},getSearchParamsArray(){let e=[];return this.columns.forEach((t=>{t.field&&e.push(t.label)})),e}}};var Ia=a(5304),Qa=a(1682),Ya=a(3532),Pa=a(7220),Fa=a(5863);const $a=(0,d.Z)(Oa,[["render",Aa],["__scopeId","data-v-7697f4d8"]]),Ba=$a;z()(Oa,"components",{QSpinnerBall:Ia.Z,QInput:q.Z,QIcon:C.Z,QSelect:_a.Z,QSeparator:U.Z,QTable:va.Z,QTh:Qa.Z,QTr:Ya.Z,QTd:Pa.Z,QPopupEdit:Fa.Z,QBtn:N.Z,QTooltip:ba.Z});const Ha=e=>((0,r.dD)("data-v-dea1ad68"),e=e(),(0,r.Cn)(),e),Ra={key:1},Ga={class:"row"},Ja={class:"col-3"},Xa={class:"col-2"},Ka={key:2,class:"text-center"},eo=Ha((()=>(0,r._)("div",{class:"text-h4",style:{opacity:"0.5"}},"У вас нет прав",-1))),to=Ha((()=>(0,r._)("img",{class:"image",src:Ea()},null,-1))),ao=[eo,to];function oo(e,t,a,o,l,s){const n=(0,r.up)("q-spinner-ball"),i=(0,r.up)("q-icon"),d=(0,r.up)("q-input"),c=(0,r.up)("q-select"),u=(0,r.up)("q-separator"),m=(0,r.up)("q-th"),p=(0,r.up)("q-td"),h=(0,r.up)("q-tr"),w=(0,r.up)("q-table");return(0,r.wg)(),(0,r.iD)("div",null,[l.loaded?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(n,{key:0,class:"fixed-center",size:"5rem",color:"white",thickness:3})),l.loaded&&!l.error?((0,r.wg)(),(0,r.iD)("div",Ra,[(0,r._)("div",Ga,[(0,r._)("div",Ja,[(0,r.Wm)(d,{style:{"padding-bottom":"0px"},"bottom-slots":"",borderless:"",modelValue:l.text,"onUpdate:modelValue":t[0]||(t[0]=e=>l.text=e),label:"Поиск"},{prepend:(0,r.w5)((()=>[(0,r.Wm)(i,{name:"search"})])),_:1},8,["modelValue"])]),(0,r._)("div",Xa,[(0,r.Wm)(c,{borderless:"",modelValue:this.searchSelected,"onUpdate:modelValue":t[1]||(t[1]=e=>this.searchSelected=e),options:s.getSearchParamsArray},null,8,["modelValue","options"])])]),(0,r.Wm)(u),(0,r.Wm)(w,{flat:"",borderless:"",separator:"cell",rows:s.getRows,columns:l.columns,"row-key":"name","no-data-label":"Ничего не найдено"},{"header-cell":(0,r.w5)((e=>[(0,r.Wm)(m,{props:e},{default:(0,r.w5)((()=>[e.col.canEdit?((0,r.wg)(),(0,r.j4)(i,{key:0,name:"lock_open",size:"1.5em"})):null!=e.col.canEdit?((0,r.wg)(),(0,r.j4)(i,{key:1,name:"lock",size:"1.5em"})):(0,r.kq)("",!0),(0,r.Uk)(" "+(0,J.zw)(e.col.label),1)])),_:2},1032,["props"])])),body:(0,r.w5)((e=>[(0,r.Wm)(h,{props:e},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{key:"_id",props:e},{default:(0,r.w5)((()=>[(0,r._)("div",null,(0,J.zw)(e.row._id),1)])),_:2},1032,["props"]),(0,r.Wm)(p,{key:"value",props:e},{default:(0,r.w5)((()=>[(0,r._)("div",null,(0,J.zw)(e.row.value),1)])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","columns"])])):(0,r.kq)("",!0),403==l.error?((0,r.wg)(),(0,r.iD)("div",Ka,ao)):(0,r.kq)("",!0)])}const lo={data(){return{text:"",searchSelected:"",columns:[{name:"_id",align:"center",label:"Id",field:"_id",canEdit:!1,sortable:!0},{name:"value",align:"center",label:"Роль",field:"value",canEdit:!1,sortable:!0}],rows:[],error:0,loaded:!1}},mounted(){this.roles(),this.searchSelected=this.getSearchParamsArray[0]},methods:{async roles(){this.loaded=!1,this.error=0;try{const e=await k.api.get("auth/roles",{headers:{Authorization:"Bearer "+S().get("token")}});this.rows=e.data,this.loaded=!0}catch(e){this.onError(e)}},onError(e){this.loaded=!0,e.response&&e.response.status?(this.error=e.response.status,403!=this.error&&this.$q.notify({type:"negative",message:e.response.data.message??"Ошибка сервера"})):this.$q.notify({type:"negative",message:"Нет соединения с сервером"})}},computed:{getRows(){if(""!==this.text){let e,t=this.text,a=[];this.columns.forEach((t=>{t.label==this.searchSelected&&(e=t.field)}));let o=e.split(".");return this.rows.map((function(e){let l=e[o[0]];for(let t=1;t<o.length;t++)l=l[o[t]];"object"==typeof l?l.forEach((o=>{o.toString().toLowerCase().includes(t.toString().toLowerCase())&&a.push(e)})):l.toString().toLowerCase().includes(t.toString().toLowerCase())&&a.push(e)})),a}return this.rows},getSearchParamsArray(){let e=[];return this.columns.forEach((t=>{t.field&&e.push(t.label)})),e}}},so=(0,d.Z)(lo,[["render",oo],["__scopeId","data-v-dea1ad68"]]),ro=so;z()(lo,"components",{QSpinnerBall:Ia.Z,QInput:q.Z,QIcon:C.Z,QSelect:_a.Z,QSeparator:U.Z,QTable:va.Z,QTh:Qa.Z,QTr:Ya.Z,QTd:Pa.Z});const no=e=>((0,r.dD)("data-v-7f103aea"),e=e(),(0,r.Cn)(),e),io={key:1},co={class:"row"},uo={class:"col-3"},mo={class:"col-2"},po={class:"col-1 q-mt-sm"},ho=no((()=>(0,r._)("div",{class:"text-h6"},"Добавление нового факта",-1))),wo={key:2,class:"text-center"},go=no((()=>(0,r._)("div",{class:"text-h4",style:{opacity:"0.5"}},"У вас нет прав",-1))),fo=no((()=>(0,r._)("img",{class:"image",src:Ea()},null,-1))),yo=[go,fo];function _o(e,t,a,o,l,s){const n=(0,r.up)("q-spinner-ball"),i=(0,r.up)("q-icon"),d=(0,r.up)("q-input"),c=(0,r.up)("q-select"),u=(0,r.up)("q-space"),m=(0,r.up)("q-tooltip"),p=(0,r.up)("q-btn"),h=(0,r.up)("q-bar"),w=(0,r.up)("q-card-section"),g=(0,r.up)("q-card"),f=(0,r.up)("q-dialog"),y=(0,r.up)("q-separator"),_=(0,r.up)("q-th"),b=(0,r.up)("q-popup-edit"),v=(0,r.up)("q-td"),x=(0,r.up)("q-tr"),M=(0,r.up)("q-table"),k=(0,r.Q2)("close-popup");return(0,r.wg)(),(0,r.iD)("div",null,[l.loaded?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(n,{key:0,class:"fixed-center",size:"5rem",color:"white",thickness:3})),l.loaded&&!l.error?((0,r.wg)(),(0,r.iD)("div",io,[(0,r._)("div",co,[(0,r._)("div",uo,[(0,r.Wm)(d,{style:{"padding-bottom":"0px"},"bottom-slots":"",borderless:"",modelValue:l.text,"onUpdate:modelValue":t[0]||(t[0]=e=>l.text=e),label:"Поиск"},{prepend:(0,r.w5)((()=>[(0,r.Wm)(i,{name:"search"})])),_:1},8,["modelValue"])]),(0,r._)("div",mo,[(0,r.Wm)(c,{borderless:"",modelValue:this.searchSelected,"onUpdate:modelValue":t[1]||(t[1]=e=>this.searchSelected=e),options:s.getSearchParamsArray},null,8,["modelValue","options"])]),(0,r._)("div",po,[(0,r.Wm)(p,{flat:"",icon:"add",onClick:t[9]||(t[9]=e=>l.icon=!0)},{default:(0,r.w5)((()=>[(0,r.Wm)(f,{modelValue:l.icon,"onUpdate:modelValue":t[8]||(t[8]=e=>l.icon=e)},{default:(0,r.w5)((()=>[(0,r.Wm)(g,{class:"bg-white text-black add-fact"},{default:(0,r.w5)((()=>[(0,r.Wm)(h,null,{default:(0,r.w5)((()=>[(0,r.Wm)(u),(0,r.wy)(((0,r.wg)(),(0,r.j4)(p,{dense:"",flat:"",icon:"close"},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{class:"bg-white text-primary"},{default:(0,r.w5)((()=>[(0,r.Uk)("Закрыть")])),_:1})])),_:1})),[[k]])])),_:1}),(0,r.Wm)(w,null,{default:(0,r.w5)((()=>[ho])),_:1}),(0,r.Wm)(w,{class:"q-pt-none"},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{modelValue:l.newAuthor,"onUpdate:modelValue":t[2]||(t[2]=e=>l.newAuthor=e),label:"О ком"},null,8,["modelValue"]),(0,r.Wm)(d,{modelValue:l.newFactFooter,"onUpdate:modelValue":t[3]||(t[3]=e=>l.newFactFooter=e),label:"Авторсоке право на используемое изображение"},null,8,["modelValue"]),(0,r.Wm)(d,{modelValue:l.newFactName,"onUpdate:modelValue":t[4]||(t[4]=e=>l.newFactName=e),label:"Название"},null,8,["modelValue"]),(0,r.Wm)(d,{modelValue:l.newFactText,"onUpdate:modelValue":t[5]||(t[5]=e=>l.newFactText=e),label:"Текст"},null,8,["modelValue"]),(0,r.Wm)(d,{modelValue:l.newImgUrl,"onUpdate:modelValue":t[6]||(t[6]=e=>l.newImgUrl=e),label:"Ссылка на изображение"},null,8,["modelValue"]),(0,r.Wm)(p,{flat:"",style:{width:"100%","background-color":"rgba(7, 7, 7, 0.050)"},onClick:t[7]||(t[7]=e=>s.addNewFacts())},{default:(0,r.w5)((()=>[(0,r.Uk)("Принять")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])]),(0,r.Wm)(y),(0,r.Wm)(M,{flat:"",borderless:"",separator:"cell",rows:s.getRows,columns:l.columns,"row-key":"name","no-data-label":"Ничего не найдено"},{"header-cell":(0,r.w5)((e=>[(0,r.Wm)(_,{props:e},{default:(0,r.w5)((()=>[e.col.canEdit?((0,r.wg)(),(0,r.j4)(i,{key:0,name:"lock_open",size:"1.5em"})):null!=e.col.canEdit?((0,r.wg)(),(0,r.j4)(i,{key:1,name:"lock",size:"1.5em"})):(0,r.kq)("",!0),(0,r.Uk)(" "+(0,J.zw)(e.col.label),1)])),_:2},1032,["props"])])),body:(0,r.w5)((e=>[(0,r.Wm)(x,{props:e},{default:(0,r.w5)((()=>[(0,r.Wm)(v,{key:"author",props:e},{default:(0,r.w5)((()=>[(0,r._)("div",null,(0,J.zw)(s.getShortText(e.row.author)),1),(0,r.Wm)(b,{modelValue:e.row.author,"onUpdate:modelValue":t=>e.row.author=t,onHide:t=>s.changeAuthor(e.row._id,e.row.author)},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{type:"textarea",modelValue:e.row.author,"onUpdate:modelValue":t=>e.row.author=t,label:"Новое имя автора"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["modelValue","onUpdate:modelValue","onHide"])])),_:2},1032,["props"]),(0,r.Wm)(v,{key:"fact_footer",props:e},{default:(0,r.w5)((()=>[(0,r._)("div",null,(0,J.zw)(s.getShortText(e.row.fact_footer)),1),(0,r.Wm)(b,{modelValue:e.row.fact_footer,"onUpdate:modelValue":t=>e.row.fact_footer=t,onHide:t=>s.changeFooter(e.row._id,e.row.fact_footer)},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{type:"textarea",modelValue:e.row.fact_footer,"onUpdate:modelValue":t=>e.row.fact_footer=t,label:"Новое подпись картины"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["modelValue","onUpdate:modelValue","onHide"])])),_:2},1032,["props"]),(0,r.Wm)(v,{key:"fact_name",props:e},{default:(0,r.w5)((()=>[(0,r._)("div",null,(0,J.zw)(s.getShortText(e.row.fact_name)),1),(0,r.Wm)(b,{modelValue:e.row.fact_name,"onUpdate:modelValue":t=>e.row.fact_name=t,onHide:t=>s.changeName(e.row._id,e.row.fact_name)},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{type:"textarea",modelValue:e.row.fact_name,"onUpdate:modelValue":t=>e.row.fact_name=t,label:"Новое название картины"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["modelValue","onUpdate:modelValue","onHide"])])),_:2},1032,["props"]),(0,r.Wm)(v,{key:"fact_text",props:e},{default:(0,r.w5)((()=>[(0,r._)("div",null,(0,J.zw)(s.getShortText(e.row.fact_text)),1),(0,r.Wm)(b,{modelValue:e.row.fact_text,"onUpdate:modelValue":t=>e.row.fact_text=t,onHide:t=>s.changeDescription(e.row._id,e.row.fact_text)},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{type:"textarea",modelValue:e.row.fact_text,"onUpdate:modelValue":t=>e.row.fact_text=t,label:"Новое описание картины"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["modelValue","onUpdate:modelValue","onHide"])])),_:2},1032,["props"]),(0,r.Wm)(v,{key:"image_url",props:e},{default:(0,r.w5)((()=>[e.row.image_url?((0,r.wg)(),(0,r.j4)(p,{key:0,href:e.row.image_url,target:"_blank",flat:"",dense:"",color:"grey-8"},{default:(0,r.w5)((()=>[(0,r.Wm)(i,{name:"link"}),(0,r.Wm)(m,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Перейти по ссылке")])),_:1})])),_:2},1032,["href"])):(0,r.kq)("",!0),(0,r.Uk)(" "+(0,J.zw)(s.getShortText(e.row.image_url))+" ",1),(0,r.Wm)(b,{modelValue:e.row.image_url,"onUpdate:modelValue":t=>e.row.image_url=t,onHide:t=>s.changeUrl(e.row._id,e.row.image_url)},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{type:"textarea",modelValue:e.row.image_url,"onUpdate:modelValue":t=>e.row.image_url=t,label:"Новая фотография картины"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["modelValue","onUpdate:modelValue","onHide"])])),_:2},1032,["props"]),(0,r.Wm)(v,{key:"views",props:e},{default:(0,r.w5)((()=>[(0,r.Uk)((0,J.zw)(e.row.viewCount),1)])),_:2},1032,["props"]),(0,r.Wm)(v,{key:"like",props:e},{default:(0,r.w5)((()=>[(0,r.Uk)((0,J.zw)(e.row.likeCount),1)])),_:2},1032,["props"]),(0,r.Wm)(v,{key:"control"},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{onClick:t=>s.removeFacts(e.row._id),flat:"",dense:"",color:"grey-8"},{default:(0,r.w5)((()=>[(0,r.Wm)(i,{name:"delete_forever"}),(0,r.Wm)(m,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Удалить")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["rows","columns"])])):(0,r.kq)("",!0),403==l.error?((0,r.wg)(),(0,r.iD)("div",wo,yo)):(0,r.kq)("",!0)])}const bo={data(){return{icon:(0,s.iH)(!1),newPass:"",text:"",roles:[],searchSelected:"",auth:"12GradMapAdmin345SRscx:23pdmtF334slkRDcS5EREc2",columns:[{name:"author",label:"О ком",align:"left",field:"author",canEdit:!0,sortable:!0},{name:"fact_footer",align:"left",label:"Авторское право на используемое изображение",field:"fact_footer",canEdit:!0,sortable:!0},{name:"fact_name",align:"left",label:"Название",field:"fact_name",canEdit:!0,sortable:!0},{name:"fact_text",align:"left",label:"Тест",field:"fact_text",canEdit:!0,sortable:!0},{name:"image_url",align:"left",label:"Ссылка на изображение",field:"image_url",canEdit:!0,sortable:!0},{name:"views",align:"left",label:"Просмотры",field:"viewCount",canEdit:!1,sortable:!0},{name:"like",align:"left",label:"Лайки",field:"likeCount",canEdit:!1,sortable:!0},{name:"control",align:"left",label:"Управление"}],rows:[],error:0,loaded:!1,newAuthor:"",newFactFooter:"",newFactName:"",newFactText:"",newImgUrl:""}},mounted(){this.getFacts(),this.searchSelected=this.getSearchParamsArray[0]},methods:{getShortText(e,t=50){return e&&e.length>t?e.substring(0,t)+"...":e},async getFacts(){this.loaded=!1,this.error=0;try{const e=await k.api.get("api/fact",{headers:{Authorization:"Basic "+btoa(this.auth),"x-requested-with":"*"}});e.data.forEach((e=>{let t=0;null!=e.views&&Object.values(e.views).forEach((e=>{e.like&&t++})),e["likeCount"]=t,e["viewCount"]=e.views?Object.values(e.views).length:0})),this.rows=e.data,this.loaded=!0}catch(e){this.onError(e)}},onError(e){this.loaded=!0,e.response&&e.response.status?(this.error=e.response.status,403!=this.error&&this.$q.notify({type:"negative",message:e.response.data.message??"Ошибка сервера"})):this.$q.notify({type:"negative",message:"Нет соединения с сервером"})},async removeFacts(e){try{await k.api["delete"]("api/fact/"+e,{headers:{Authorization:"Basic "+btoa(this.auth),"x-requested-with":"*"}});this.loaded=!0,this.$q.notify({type:"positive",message:"Факт удален"}),this.getFacts()}catch(t){this.onError(t)}},async changeAuthor(e,t){try{await k.api.put("api/fact/"+e,{author:t},{headers:{Authorization:"Basic "+btoa(this.auth),"x-requested-with":"*"}}),this.$q.notify({type:"positive",message:"Автор сохранен"})}catch(a){this.onError(a)}},async changeFooter(e,t){try{await k.api.put("api/fact/"+e,{fact_footer:t},{headers:{Authorization:"Basic "+btoa(this.auth),"x-requested-with":"*"}}),this.$q.notify({type:"positive",message:"Автор сохранен"})}catch(a){this.onError(a)}},async changeName(e,t){try{await k.api.put("api/fact/"+e,{fact_name:t},{headers:{Authorization:"Basic "+btoa(this.auth),"x-requested-with":"*"}}),this.$q.notify({type:"positive",message:"Автор сохранен"})}catch(a){this.onError(a)}},async changeDescription(e,t){try{await k.api.put("api/fact/"+e,{fact_text:t},{headers:{Authorization:"Basic "+btoa(this.auth),"x-requested-with":"*"}}),this.$q.notify({type:"positive",message:"Автор сохранен"})}catch(a){this.onError(a)}},async changeUrl(e,t){try{await k.api.put("api/fact/"+e,{image_url:t},{headers:{Authorization:"Basic "+btoa(this.auth),"x-requested-with":"*"}}),this.$q.notify({type:"positive",message:"Автор сохранен"})}catch(a){this.onError(a)}},async addNewFacts(){try{await k.api.post("api/fact",{author:this.newAuthor,fact_footer:this.newFactFooter,fact_name:this.newFactName,fact_text:this.newFactText,image_url:this.newImgUrl},{headers:{Authorization:"Basic "+btoa(this.auth),"x-requested-with":"*"}});this.$q.notify({type:"positive",message:"Новый факт успешно добавлен."}),this.icon=!1,this.getFacts(),this.newAuthor="",this.newFactName="",this.newFactText="",this.newImgUrl=""}catch(e){this.onError(e)}}},computed:{getSearchParamsArray(){let e=[];return this.columns.forEach((t=>{t.field&&e.push(t.label)})),e},getRows(){if(""!==this.text){let e,t=this.text,a=[];this.columns.forEach((t=>{t.label==this.searchSelected&&(e=t.field)}));let o=e.split(".");return this.rows.map((function(e){let l=e[o[0]];for(let t=1;t<o.length;t++)l=l[o[t]];"object"==typeof l?l.forEach((o=>{o.toString().toLowerCase().includes(t.toString().toLowerCase())&&a.push(e)})):l.toString().toLowerCase().includes(t.toString().toLowerCase())&&a.push(e)})),a}return this.rows}}};var vo=a(2074),xo=a(6408),Mo=a(136),ko=a(2146);const Do=(0,d.Z)(bo,[["render",_o],["__scopeId","data-v-7f103aea"]]),So=Do;z()(bo,"components",{QSpinnerBall:Ia.Z,QInput:q.Z,QIcon:C.Z,QSelect:_a.Z,QBtn:N.Z,QDialog:vo.Z,QCard:W.Z,QBar:xo.Z,QSpace:Mo.Z,QTooltip:ba.Z,QCardSection:E.Z,QSeparator:U.Z,QTable:va.Z,QTh:Qa.Z,QTr:Ya.Z,QTd:Pa.Z,QPopupEdit:Fa.Z}),z()(bo,"directives",{ClosePopup:ko.Z});const Vo=e=>((0,r.dD)("data-v-07720c6d"),e=e(),(0,r.Cn)(),e),Wo={key:1},Eo={class:"row"},qo={class:"col-3"},Uo={class:"col-2"},Co={class:"col-1 q-mt-sm"},No=Vo((()=>(0,r._)("div",{class:"text-h6"},"Добавление нового мероприятия",-1))),To={class:"row items-center justify-end"},zo={class:"row items-center justify-end"},jo={class:"row items-center justify-end"},Lo={class:"row items-center justify-end"},Zo={class:"row items-center justify-end"},Ao={class:"row items-center justify-end"},Oo={class:"row items-center justify-end"},Io={class:"row items-center justify-end"},Qo={key:2,class:"text-center"},Yo=Vo((()=>(0,r._)("div",{class:"text-h4",style:{opacity:"0.5"}},"У вас нет прав",-1))),Po=Vo((()=>(0,r._)("img",{class:"image",src:Ea()},null,-1))),Fo=[Yo,Po];function $o(e,t,a,o,l,s){const n=(0,r.up)("q-spinner-ball"),i=(0,r.up)("q-icon"),d=(0,r.up)("q-input"),c=(0,r.up)("q-select"),u=(0,r.up)("q-space"),m=(0,r.up)("q-tooltip"),p=(0,r.up)("q-btn"),h=(0,r.up)("q-bar"),w=(0,r.up)("q-card-section"),g=(0,r.up)("q-date"),f=(0,r.up)("q-popup-proxy"),y=(0,r.up)("q-time"),_=(0,r.up)("q-checkbox"),b=(0,r.up)("q-card"),v=(0,r.up)("q-dialog"),x=(0,r.up)("q-separator"),M=(0,r.up)("q-th"),k=(0,r.up)("q-popup-edit"),D=(0,r.up)("q-td"),S=(0,r.up)("q-tr"),V=(0,r.up)("q-table"),W=(0,r.Q2)("close-popup");return(0,r.wg)(),(0,r.iD)("div",null,[l.loaded?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(n,{key:0,class:"fixed-center",size:"5rem",color:"white",thickness:3})),l.loaded&&!l.error?((0,r.wg)(),(0,r.iD)("div",Wo,[(0,r._)("div",Eo,[(0,r._)("div",qo,[(0,r.Wm)(d,{style:{"padding-bottom":"0px"},"bottom-slots":"",borderless:"",modelValue:l.text,"onUpdate:modelValue":t[0]||(t[0]=e=>l.text=e),label:"Поиск"},{prepend:(0,r.w5)((()=>[(0,r.Wm)(i,{name:"search"})])),_:1},8,["modelValue"])]),(0,r._)("div",Uo,[(0,r.Wm)(c,{borderless:"",modelValue:this.searchSelected,"onUpdate:modelValue":t[1]||(t[1]=e=>this.searchSelected=e),options:s.getSearchParamsArray},null,8,["modelValue","options"])]),(0,r._)("div",Co,[(0,r.Wm)(p,{flat:"",icon:"add",onClick:t[14]||(t[14]=e=>o.icon=!0)},{default:(0,r.w5)((()=>[(0,r.Wm)(v,{modelValue:o.icon,"onUpdate:modelValue":t[13]||(t[13]=e=>o.icon=e)},{default:(0,r.w5)((()=>[(0,r.Wm)(b,{class:"bg-white text-black add-fact"},{default:(0,r.w5)((()=>[(0,r.Wm)(h,null,{default:(0,r.w5)((()=>[(0,r.Wm)(u),(0,r.wy)(((0,r.wg)(),(0,r.j4)(p,{dense:"",flat:"",icon:"close"},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{class:"bg-white text-primary"},{default:(0,r.w5)((()=>[(0,r.Uk)("Закрыть")])),_:1})])),_:1})),[[W]])])),_:1}),(0,r.Wm)(w,null,{default:(0,r.w5)((()=>[No])),_:1}),(0,r.Wm)(w,{class:"q-pt-none"},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{modelValue:l.newName,"onUpdate:modelValue":t[2]||(t[2]=e=>l.newName=e),label:"Название"},null,8,["modelValue"]),(0,r.Wm)(d,{modelValue:l.newDateStart,"onUpdate:modelValue":t[5]||(t[5]=e=>l.newDateStart=e),label:"Дата начала"},{prepend:(0,r.w5)((()=>[(0,r.Wm)(i,{name:"event",class:"cursor-pointer"},{default:(0,r.w5)((()=>[(0,r.Wm)(f,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,r.w5)((()=>[(0,r.Wm)(g,{modelValue:l.newDateStart,"onUpdate:modelValue":t[3]||(t[3]=e=>l.newDateStart=e),mask:"DD.MM.YYYY, HH:mm:ss",minimal:"","first-day-of-week":"1",locale:l.localeCalend},{default:(0,r.w5)((()=>[(0,r._)("div",To,[(0,r.wy)((0,r.Wm)(p,{label:"Закрыть",color:"primary",flat:""},null,512),[[W]])])])),_:1},8,["modelValue","locale"])])),_:1})])),_:1})])),append:(0,r.w5)((()=>[(0,r.Wm)(i,{name:"access_time",class:"cursor-pointer"},{default:(0,r.w5)((()=>[(0,r.Wm)(f,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,r.w5)((()=>[(0,r.Wm)(y,{modelValue:l.newDateStart,"onUpdate:modelValue":t[4]||(t[4]=e=>l.newDateStart=e),mask:"DD.MM.YYYY, HH:mm:ss",format24h:"","first-day-of-week":"1",locale:l.localeCalend},{default:(0,r.w5)((()=>[(0,r._)("div",zo,[(0,r.wy)((0,r.Wm)(p,{label:"Закрыть",color:"primary",flat:""},null,512),[[W]])])])),_:1},8,["modelValue","locale"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,r.Wm)(d,{modelValue:l.newDateEnd,"onUpdate:modelValue":t[8]||(t[8]=e=>l.newDateEnd=e),label:"Дата окончания"},{prepend:(0,r.w5)((()=>[(0,r.Wm)(i,{name:"event",class:"cursor-pointer"},{default:(0,r.w5)((()=>[(0,r.Wm)(f,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,r.w5)((()=>[(0,r.Wm)(g,{modelValue:l.newDateEnd,"onUpdate:modelValue":t[6]||(t[6]=e=>l.newDateEnd=e),mask:"DD.MM.YYYY, HH:mm:ss",minimal:"","first-day-of-week":"1",locale:l.localeCalend},{default:(0,r.w5)((()=>[(0,r._)("div",jo,[(0,r.wy)((0,r.Wm)(p,{label:"Закрыть",color:"primary",flat:""},null,512),[[W]])])])),_:1},8,["modelValue","locale"])])),_:1})])),_:1})])),append:(0,r.w5)((()=>[(0,r.Wm)(i,{name:"access_time",class:"cursor-pointer"},{default:(0,r.w5)((()=>[(0,r.Wm)(f,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,r.w5)((()=>[(0,r.Wm)(y,{modelValue:l.newDateEnd,"onUpdate:modelValue":t[7]||(t[7]=e=>l.newDateEnd=e),mask:"DD.MM.YYYY, HH:mm:ss",format24h:"","first-day-of-week":"1",locale:l.localeCalend},{default:(0,r.w5)((()=>[(0,r._)("div",Lo,[(0,r.wy)((0,r.Wm)(p,{label:"Закрыть",color:"primary",flat:""},null,512),[[W]])])])),_:1},8,["modelValue","locale"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,r.Wm)(_,{modelValue:l.newIsFree,"onUpdate:modelValue":t[9]||(t[9]=e=>l.newIsFree=e),label:"Бесплатное",style:{opacity:"60%"}},null,8,["modelValue"]),(0,r.Wm)(d,{modelValue:l.newOrganizName,"onUpdate:modelValue":t[10]||(t[10]=e=>l.newOrganizName=e),label:"Организатор"},null,8,["modelValue"]),(0,r.Wm)(d,{modelValue:l.newUrl,"onUpdate:modelValue":t[11]||(t[11]=e=>l.newUrl=e),label:"Адрес сайта"},null,8,["modelValue"]),(0,r.Wm)(p,{flat:"",style:{width:"100%","background-color":"rgba(7, 7, 7, 0.050)"},onClick:t[12]||(t[12]=e=>s.addNewEvent())},{default:(0,r.w5)((()=>[(0,r.Uk)("Принять")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])]),(0,r.Wm)(x),(0,r.Wm)(V,{flat:"",borderless:"",separator:"cell",rows:s.getRows,columns:l.columns,"row-key":"name","no-data-label":"Ничего не найдено"},{"header-cell":(0,r.w5)((e=>[(0,r.Wm)(M,{props:e},{default:(0,r.w5)((()=>[e.col.canEdit?((0,r.wg)(),(0,r.j4)(i,{key:0,name:"lock_open",size:"1.5em"})):null!=e.col.canEdit?((0,r.wg)(),(0,r.j4)(i,{key:1,name:"lock",size:"1.5em"})):(0,r.kq)("",!0),(0,r.Uk)(" "+(0,J.zw)(e.col.label),1)])),_:2},1032,["props"])])),body:(0,r.w5)((e=>[(0,r.Wm)(S,{props:e},{default:(0,r.w5)((()=>[(0,r.Wm)(D,{key:"name",props:e},{default:(0,r.w5)((()=>[(0,r._)("div",null,(0,J.zw)(s.getShortText(e.row.name)),1),(0,r.Wm)(k,{modelValue:e.row.name,"onUpdate:modelValue":t=>e.row.name=t,onHide:t=>s.changeName(e.row._id,e.row.name)},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{type:"textarea",modelValue:e.row.name,"onUpdate:modelValue":t=>e.row.name=t,label:"Название мероприятия"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["modelValue","onUpdate:modelValue","onHide"])])),_:2},1032,["props"]),(0,r.Wm)(D,{key:"date_start",props:e},{default:(0,r.w5)((()=>[(0,r._)("div",null,(0,J.zw)(e.row.date_start),1),(0,r.Wm)(k,{modelValue:e.row.date_start,"onUpdate:modelValue":t=>e.row.date_start=t,onHide:t=>s.changeDateStart(e.row._id,e.row.date_start)},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{modelValue:e.row.date_start,"onUpdate:modelValue":t=>e.row.date_start=t},{prepend:(0,r.w5)((()=>[(0,r.Wm)(i,{name:"event",class:"cursor-pointer"},{default:(0,r.w5)((()=>[(0,r.Wm)(f,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,r.w5)((()=>[(0,r.Wm)(g,{modelValue:e.row.date_start,"onUpdate:modelValue":t=>e.row.date_start=t,mask:"DD.MM.YYYY, HH:mm:ss",minimal:"","first-day-of-week":"1",locale:l.localeCalend},{default:(0,r.w5)((()=>[(0,r._)("div",Zo,[(0,r.wy)((0,r.Wm)(p,{label:"Закрыть",color:"primary",flat:""},null,512),[[W]])])])),_:2},1032,["modelValue","onUpdate:modelValue","locale"])])),_:2},1024)])),_:2},1024)])),append:(0,r.w5)((()=>[(0,r.Wm)(i,{name:"access_time",class:"cursor-pointer"},{default:(0,r.w5)((()=>[(0,r.Wm)(f,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,r.w5)((()=>[(0,r.Wm)(y,{modelValue:e.row.date_start,"onUpdate:modelValue":t=>e.row.date_start=t,mask:"DD.MM.YYYY, HH:mm:ss",format24h:"","first-day-of-week":"1",locale:l.localeCalend},{default:(0,r.w5)((()=>[(0,r._)("div",Ao,[(0,r.wy)((0,r.Wm)(p,{label:"Закрыть",color:"primary",flat:""},null,512),[[W]])])])),_:2},1032,["modelValue","onUpdate:modelValue","locale"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["modelValue","onUpdate:modelValue","onHide"])])),_:2},1032,["props"]),(0,r.Wm)(D,{key:"date_end",props:e},{default:(0,r.w5)((()=>[(0,r._)("div",null,(0,J.zw)(e.row.date_end),1),(0,r.Wm)(k,{modelValue:e.row.date_end,"onUpdate:modelValue":t=>e.row.date_end=t,onHide:t=>s.changeDateEnd(e.row._id,e.row.date_end)},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{modelValue:e.row.date_end,"onUpdate:modelValue":t=>e.row.date_end=t},{prepend:(0,r.w5)((()=>[(0,r.Wm)(i,{name:"event",class:"cursor-pointer"},{default:(0,r.w5)((()=>[(0,r.Wm)(f,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,r.w5)((()=>[(0,r.Wm)(g,{modelValue:e.row.date_end,"onUpdate:modelValue":t=>e.row.date_end=t,mask:"DD.MM.YYYY, HH:mm:ss",minimal:"","first-day-of-week":"1",locale:l.localeCalend},{default:(0,r.w5)((()=>[(0,r._)("div",Oo,[(0,r.wy)((0,r.Wm)(p,{label:"Закрыть",color:"primary",flat:""},null,512),[[W]])])])),_:2},1032,["modelValue","onUpdate:modelValue","locale"])])),_:2},1024)])),_:2},1024)])),append:(0,r.w5)((()=>[(0,r.Wm)(i,{name:"access_time",class:"cursor-pointer"},{default:(0,r.w5)((()=>[(0,r.Wm)(f,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,r.w5)((()=>[(0,r.Wm)(y,{modelValue:e.row.date_end,"onUpdate:modelValue":t=>e.row.date_end=t,mask:"DD.MM.YYYY, HH:mm:ss",format24h:"","first-day-of-week":"1",locale:l.localeCalend},{default:(0,r.w5)((()=>[(0,r._)("div",Io,[(0,r.wy)((0,r.Wm)(p,{label:"Закрыть",color:"primary",flat:""},null,512),[[W]])])])),_:2},1032,["modelValue","onUpdate:modelValue","locale"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["modelValue","onUpdate:modelValue","onHide"])])),_:2},1032,["props"]),(0,r.Wm)(D,{key:"isFree",props:e},{default:(0,r.w5)((()=>[(0,r.Wm)(_,{modelValue:e.row.isFree,"onUpdate:modelValue":t=>e.row.isFree=t,color:"grey-8",onClick:t=>s.changeIsFree(e.row._id,e.row.isFree)},null,8,["modelValue","onUpdate:modelValue","onClick"])])),_:2},1032,["props"]),(0,r.Wm)(D,{key:"organization_name",props:e},{default:(0,r.w5)((()=>[(0,r._)("div",null,(0,J.zw)(s.getShortText(e.row.organization_name)),1),(0,r.Wm)(k,{modelValue:e.row.organization_name,"onUpdate:modelValue":t=>e.row.organization_name=t,onHide:t=>s.changeOrganizName(e.row._id,e.row.organization_name)},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{type:"textarea",modelValue:e.row.organization_name,"onUpdate:modelValue":t=>e.row.organization_name=t,label:"Организация"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["modelValue","onUpdate:modelValue","onHide"])])),_:2},1032,["props"]),(0,r.Wm)(D,{key:"url",props:e},{default:(0,r.w5)((()=>[e.row.url?((0,r.wg)(),(0,r.j4)(p,{key:0,href:e.row.url,target:"_blank",flat:"",dense:"",color:"grey-8"},{default:(0,r.w5)((()=>[(0,r.Wm)(i,{name:"link"}),(0,r.Wm)(m,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Перейти по ссылке")])),_:1})])),_:2},1032,["href"])):(0,r.kq)("",!0),(0,r.Uk)(" "+(0,J.zw)(s.getShortText(e.row.url))+" ",1),(0,r.Wm)(k,{modelValue:e.row.url,"onUpdate:modelValue":t=>e.row.url=t,onHide:t=>s.changeUrl(e.row._id,e.row.url)},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{type:"textarea",modelValue:e.row.url,"onUpdate:modelValue":t=>e.row.url=t,label:"Ссылка на мероприятие"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["modelValue","onUpdate:modelValue","onHide"])])),_:2},1032,["props"]),(0,r.Wm)(D,{key:"views",props:e},{default:(0,r.w5)((()=>[(0,r._)("div",null,(0,J.zw)(e.row.viewCount),1)])),_:2},1032,["props"]),(0,r.Wm)(D,{key:"control"},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{onClick:t=>s.removeEvent(e.row._id),flat:"",dense:"",color:"grey-8"},{default:(0,r.w5)((()=>[(0,r.Wm)(i,{name:"delete_forever"}),(0,r.Wm)(m,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Удалить")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["rows","columns"])])):(0,r.kq)("",!0),403==l.error?((0,r.wg)(),(0,r.iD)("div",Qo,Fo)):(0,r.kq)("",!0)])}const Bo={setup(){return{icon:(0,s.iH)(!1)}},data(){return{localeCalend:{monthsShort:["Янв.","Фев.","Мар.","Апр.","Май.","Июн.","Июл.","Авг.","Сен.","Окт.","Ноя.","Дек."],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],daysShort:["Вс.","Пн.","Вт.","Ср.","Чт.","Пт.","Сб."],days:["Воскрксенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"]},newPass:"",text:"",searchSelected:"",roles:[],auth:"12GradMapAdmin345SRscx:23pdmtF334slkRDcS5EREc2",trueFalseCond:[{value:!0,icon:"check_box",label:"Бесплатное"},{value:!1,icon:"check_box_outline_blank",label:"Платное"}],columns:[{name:"name",label:"Название",align:"left",field:"name",canEdit:!0,sortable:!0},{name:"date_start",label:"Дата начала",align:"left",field:"date_start",canEdit:!0,sortable:!0},{name:"date_end",align:"left",label:"Дата окончания",field:"date_end",canEdit:!0,sortable:!0},{name:"isFree",align:"center",label:"Бесплатно",canEdit:!0,sortable:!0},{name:"organization_name",align:"left",label:"Организаторы",field:"organization_name",canEdit:!0,sortable:!0},{name:"url",align:"left",label:"Адресс сайта",field:"url",canEdit:!0,sortable:!0},{name:"views",align:"left",label:"Просмотры",field:"viewCount",canEdit:!1,sortable:!0},{name:"control",align:"center",label:"Управление"}],rows:[],error:0,loaded:!1,newName:"",newDateStart:"",newDateEnd:"",newIsFree:!1,newOrganizName:"",newUrl:""}},mounted(){this.getEvents(),this.searchSelected=this.getSearchParamsArray[0]},methods:{async getEvents(){this.loaded=!1,this.error=0;try{const e=await k.api.get("api/event",{headers:{Authorization:"Basic "+btoa(this.auth),"x-requested-with":"*"}});e.data.forEach((e=>{e.date_end=this.formDateToUserView(e.date_end),e.date_start=this.formDateToUserView(e.date_start),e["viewCount"]=null!=e.views?Object.keys(e.views).length:0})),this.rows=e.data,this.loaded=!0}catch(e){console.log(e),this.onError(e)}},onError(e){this.loaded=!0,e.response&&e.response.status?(this.error=e.response.status,403!=this.error&&this.$q.notify({type:"negative",message:e.response.data.message??"Ошибка сервера"})):this.$q.notify({type:"negative",message:"Нет соединения с сервером"})},async removeEvent(e){try{await k.api["delete"]("api/event/"+e,{headers:{Authorization:"Basic "+btoa(this.auth),"x-requested-with":"*"}});this.loaded=!0,this.$q.notify({type:"positive",message:"Событие удалено"}),this.getEvents()}catch(t){this.onError(t)}},async changeName(e,t){try{await k.api.put("api/event/"+e,{name:t},{headers:{Authorization:"Basic "+btoa(this.auth),"x-requested-with":"*"}}),this.$q.notify({type:"positive",message:"Название сохранено"})}catch(a){this.onError(a)}},getShortText(e,t=50){return e&&e.length>t?e.substring(0,t)+"...":e},formDateToUserView(e){let t=new Date(e).toLocaleString("ru-RU",{timeZone:"Europe/Moscow"});return t},formDateToDB(e){let t=e.split(","),a=t[0].split("."),o=t[1].split(":"),l=a[2]+"-"+a[1]+"-"+a[0]+"T"+(Number(o[0])-3).toString().padStart(2,"0")+":"+o[1]+":"+o[2]+".000Z";return l},async changeDateStart(e,t){let a=this.formDateToDB(t);try{await k.api.put("api/event/"+e,{date_start:a},{headers:{Authorization:"Basic "+btoa(this.auth),"x-requested-with":"*"}}),this.$q.notify({type:"positive",message:"Название сохранено"})}catch(o){this.onError(o)}},async changeDateEnd(e,t){this.formDateToDB(t);try{await k.api.put("api/event/"+e,{date_end:t},{headers:{Authorization:"Basic "+btoa(this.auth),"x-requested-with":"*"}}),this.$q.notify({type:"positive",message:"Название сохранено"})}catch(a){this.onError(a)}},async changeIsFree(e,t){try{await k.api.put("api/event/"+e,{isFree:t},{headers:{Authorization:"Basic "+btoa(this.auth),"x-requested-with":"*"}}),this.$q.notify({type:"positive",message:"Тип сохранен"})}catch(a){this.onError(a)}},async changeOrganizName(e,t){try{await k.api.put("api/event/"+e,{organization_name:t},{headers:{Authorization:"Basic "+btoa(this.auth),"x-requested-with":"*"}}),this.$q.notify({type:"positive",message:"Название организации сохранено"})}catch(a){this.onError(a)}},async changeUrl(e,t){try{await k.api.put("api/event/"+e,{url:t},{headers:{Authorization:"Basic "+btoa(this.auth),"x-requested-with":"*"}}),this.$q.notify({type:"positive",message:"Ссылка на мероприятие сохранена"})}catch(a){this.onError(a)}},async addNewEvent(){let e=this.formDateToDB(this.newDateStart),t=this.formDateToDB(this.newDateEnd);this.newName,this.newIsFree,this.newOrganizName,this.newUrl;try{await k.api.post("api/event",{name:this.newName,date_start:e,date_end:t,isFree:this.newIsFree,organization_name:this.newOrganizName,url:this.newUrl},{headers:{Authorization:"Basic "+btoa(this.auth),"x-requested-with":"*"}});this.$q.notify({type:"positive",message:"Новое соьбытие успешно добавлен."}),this.icon=!1,this.getEvents()}catch(a){this.onError(a)}}},computed:{getSearchParamsArray(){let e=[];return this.columns.forEach((t=>{t.field&&e.push(t.label)})),e},getRows(){if(""!==this.text){let e,t=this.text,a=[];this.columns.forEach((t=>{t.label==this.searchSelected&&(e=t.field)}));let o=e.split(".");return this.rows.map((function(e){let l=e[o[0]];for(let t=1;t<o.length;t++)l=l[o[t]];"object"==typeof l?l.forEach((o=>{o.toString().toLowerCase().includes(t.toString().toLowerCase())&&a.push(e)})):l.toString().toLowerCase().includes(t.toString().toLowerCase())&&a.push(e)})),a}return this.rows}}};var Ho=a(2765),Ro=a(2952),Go=a(6770),Jo=a(1006);const Xo=(0,d.Z)(Bo,[["render",$o],["__scopeId","data-v-07720c6d"]]),Ko=Xo;z()(Bo,"components",{QSpinnerBall:Ia.Z,QInput:q.Z,QIcon:C.Z,QSelect:_a.Z,QBtn:N.Z,QDialog:vo.Z,QCard:W.Z,QBar:xo.Z,QSpace:Mo.Z,QTooltip:ba.Z,QCardSection:E.Z,QPopupProxy:Ho.Z,QDate:Ro.Z,QTime:Go.Z,QCheckbox:Jo.Z,QSeparator:U.Z,QTable:va.Z,QTh:Qa.Z,QTr:Ya.Z,QTd:Pa.Z,QPopupEdit:Fa.Z}),z()(Bo,"directives",{ClosePopup:ko.Z});const el=e=>((0,r.dD)("data-v-08ed9ed4"),e=e(),(0,r.Cn)(),e),tl={key:1},al={class:"row"},ol={class:"col-3"},ll={class:"col-2"},sl={class:"col q-mt-sm"},rl=el((()=>(0,r._)("div",{class:"text-h6"},"Добавление новой школы",-1))),nl=el((()=>(0,r._)("div",{id:"container"},null,-1))),il=el((()=>(0,r._)("div",{class:"text-h6"},"Изменине координат школы",-1))),dl=el((()=>(0,r._)("div",{id:"map"},null,-1))),cl={key:2,class:"text-center"},ul=el((()=>(0,r._)("div",{class:"text-h4",style:{opacity:"0.5"}},"У вас нет прав",-1))),ml=el((()=>(0,r._)("img",{class:"image",src:Ea()},null,-1))),pl=[ul,ml];function hl(e,t,a,l,s,n){const i=(0,r.up)("q-spinner-ball"),d=(0,r.up)("q-icon"),c=(0,r.up)("q-input"),u=(0,r.up)("q-select"),m=(0,r.up)("q-tooltip"),p=(0,r.up)("q-space"),h=(0,r.up)("q-btn"),w=(0,r.up)("q-bar"),g=(0,r.up)("q-card-section"),f=(0,r.up)("q-card"),y=(0,r.up)("q-dialog"),_=(0,r.up)("q-separator"),b=(0,r.up)("q-th"),v=(0,r.up)("q-popup-edit"),x=(0,r.up)("q-td"),M=(0,r.up)("q-editor"),k=(0,r.up)("q-modal"),D=(0,r.up)("q-tr"),S=(0,r.up)("q-table"),V=(0,r.Q2)("close-popup");return(0,r.wg)(),(0,r.iD)("div",null,[s.loaded?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(i,{key:0,class:"fixed-center",size:"5rem",color:"white",thickness:3})),s.loaded&&!s.error?((0,r.wg)(),(0,r.iD)("div",tl,[(0,r._)("div",al,[(0,r._)("div",ol,[(0,r.Wm)(c,{style:{"padding-bottom":"0px"},"bottom-slots":"",borderless:"",modelValue:s.text,"onUpdate:modelValue":t[0]||(t[0]=e=>s.text=e),label:"Поиск"},{prepend:(0,r.w5)((()=>[(0,r.Wm)(d,{name:"search"})])),_:1},8,["modelValue"])]),(0,r._)("div",ll,[(0,r.Wm)(u,{borderless:"",modelValue:this.searchSelected,"onUpdate:modelValue":t[1]||(t[1]=e=>this.searchSelected=e),options:n.getSearchParamsArray},null,8,["modelValue","options"])]),(0,r._)("div",sl,[(0,r.Wm)(h,{flat:"",icon:"add",onClick:t[11]||(t[11]=e=>(s.icon=!0,n.showAddMap()))},{default:(0,r.w5)((()=>[(0,r.Wm)(m,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Добавить новую запись")])),_:1}),(0,r.Wm)(y,{modelValue:s.icon,"onUpdate:modelValue":t[10]||(t[10]=e=>s.icon=e)},{default:(0,r.w5)((()=>[(0,r.Wm)(f,{class:"bg-white text-black add-fact"},{default:(0,r.w5)((()=>[(0,r.Wm)(w,null,{default:(0,r.w5)((()=>[(0,r.Wm)(p),(0,r.wy)(((0,r.wg)(),(0,r.j4)(h,{dense:"",flat:"",icon:"close"},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{class:"bg-white text-primary"},{default:(0,r.w5)((()=>[(0,r.Uk)("Закрыть")])),_:1})])),_:1})),[[V]])])),_:1}),(0,r.Wm)(g,null,{default:(0,r.w5)((()=>[rl])),_:1}),(0,r.Wm)(g,{class:"q-pt-none"},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{modelValue:s.newName,"onUpdate:modelValue":t[2]||(t[2]=e=>s.newName=e),label:"Название"},null,8,["modelValue"]),(0,r.Wm)(c,{modelValue:s.newDescription,"onUpdate:modelValue":t[3]||(t[3]=e=>s.newDescription=e),label:"Описание"},null,8,["modelValue"]),(0,r.Wm)(c,{modelValue:s.newSchoolImg,"onUpdate:modelValue":t[4]||(t[4]=e=>s.newSchoolImg=e),label:"Фотография школы"},null,8,["modelValue"]),(0,r.Wm)(c,{modelValue:l.newShoolAddressName,"onUpdate:modelValue":t[5]||(t[5]=e=>l.newShoolAddressName=e),label:"Адресс школы",readonly:""},null,8,["modelValue"]),(0,r.Wm)(c,{modelValue:s.newAddressComment,"onUpdate:modelValue":t[6]||(t[6]=e=>s.newAddressComment=e),label:"Комментарий адреса"},null,8,["modelValue"]),nl,(0,r.Wm)(c,{modelValue:s.newWebSite,"onUpdate:modelValue":t[7]||(t[7]=e=>s.newWebSite=e),label:"Адрес сайта"},null,8,["modelValue"]),(0,r.Wm)(c,{modelValue:s.newMail,"onUpdate:modelValue":t[8]||(t[8]=e=>s.newMail=e),label:"Электронная почта школы"},null,8,["modelValue"]),(0,r.Wm)(h,{style:{width:"100%","background-color":"rgba(7, 7, 7, 0.05)"},flat:"",onClick:t[9]||(t[9]=e=>n.addNewSchool())},{default:(0,r.w5)((()=>[(0,r.Uk)("Принять")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])]),(0,r.Wm)(_),(0,r.Wm)(S,{flat:"",borderless:"",separator:"cell",rows:n.getRows,columns:s.columns,"row-key":"name","no-data-label":"Ничего не найдено"},{"header-cell":(0,r.w5)((e=>[(0,r.Wm)(b,{props:e},{default:(0,r.w5)((()=>[e.col.canEdit?((0,r.wg)(),(0,r.j4)(d,{key:0,name:"lock_open",size:"1.5em"})):null!=e.col.canEdit?((0,r.wg)(),(0,r.j4)(d,{key:1,name:"lock",size:"1.5em"})):(0,r.kq)("",!0),(0,r.Uk)(" "+(0,J.zw)(e.col.label),1)])),_:2},1032,["props"])])),body:(0,r.w5)((e=>[(0,r.Wm)(D,{props:e},{default:(0,r.w5)((()=>[(0,r.Wm)(x,{key:"name",props:e},{default:(0,r.w5)((()=>[(0,r._)("div",null,(0,J.zw)(n.getShortText(e.row.name)),1),(0,r.Wm)(v,{modelValue:e.row.name,"onUpdate:modelValue":t=>e.row.name=t,onHide:t=>n.changeName(e.row._id,e.row.name)},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{type:"textarea",modelValue:e.row.name,"onUpdate:modelValue":t=>e.row.name=t,label:"Название школы"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["modelValue","onUpdate:modelValue","onHide"])])),_:2},1032,["props"]),(0,r.Wm)(x,{key:"description",props:e},{default:(0,r.w5)((()=>[(0,r._)("div",null,(0,J.zw)(n.getShortText(e.row.description)),1),(0,r.Wm)(v,{modelValue:e.row.description,"onUpdate:modelValue":t=>e.row.description=t,onHide:t=>n.changeDescription(e.row._id,e.row.description)},{default:(0,r.w5)((()=>[(0,r.Wm)(M,{modelValue:e.row.description,"onUpdate:modelValue":t=>e.row.description=t,"min-height":"5rem",autofocus:"",onKeyup:t[12]||(t[12]=(0,o.D2)((0,o.iM)((()=>{}),["stop"]),["enter"]))},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["modelValue","onUpdate:modelValue","onHide"])])),_:2},1032,["props"]),(0,r.Wm)(x,{key:"shool_image",props:e},{default:(0,r.w5)((()=>[e.row.image_url?((0,r.wg)(),(0,r.j4)(h,{key:0,href:e.row.image_url,target:"_blank",flat:"",dense:"",color:"grey-8"},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{name:"link"}),(0,r.Wm)(m,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Перейти по ссылке")])),_:1})])),_:2},1032,["href"])):(0,r.kq)("",!0),(0,r.Uk)(" "+(0,J.zw)(n.getShortText(e.row.image_url))+" ",1),(0,r.Wm)(v,{modelValue:e.row.image_url,"onUpdate:modelValue":t=>e.row.image_url=t,onHide:t=>n.changeSchoolImage(e.row._id,e.row.image_url)},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{type:"textarea",modelValue:e.row.image_url,"onUpdate:modelValue":t=>e.row.image_url=t,label:"Ссылка на изображение школы"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["modelValue","onUpdate:modelValue","onHide"])])),_:2},1032,["props"]),(0,r.Wm)(x,{key:"address_str",props:e},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{flat:"",dense:"",color:"grey-8",onClick:t=>(s.iconn=!0,s.idMap=e.row._id,s.curMapAdressAdress=e.row.address)},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{name:"map"}),(0,r.Uk)(),(0,r.Wm)(m,null,{default:(0,r.w5)((()=>[(0,r.Uk)(" Координаты ")])),_:1}),(0,r.Wm)(k)])),_:2},1032,["onClick"]),(0,r.Uk)(" "+(0,J.zw)(e.row.address.address_str),1)])),_:2},1032,["props"]),(0,r.Wm)(x,{key:"address_comment",props:e},{default:(0,r.w5)((()=>[(0,r._)("div",null,(0,J.zw)(e.row.address.comment),1),(0,r.Wm)(v,{modelValue:e.row.address.comment,"onUpdate:modelValue":t=>e.row.address.comment=t,onHide:t=>n.changeAddress(e.row._id,e.row.address)},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{type:"textarea",modelValue:e.row.address.comment,"onUpdate:modelValue":t=>e.row.address.comment=t,label:"Комментарий к адресу"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["modelValue","onUpdate:modelValue","onHide"])])),_:2},1032,["props"]),(0,r.Wm)(x,{key:"web_site",props:e},{default:(0,r.w5)((()=>[e.row.contacts.web_site?((0,r.wg)(),(0,r.j4)(h,{key:0,href:e.row.contacts.web_site,target:"_blank",flat:"",dense:"",color:"grey-8"},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{name:"link"}),(0,r.Wm)(m,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Перейти по ссылке")])),_:1})])),_:2},1032,["href"])):(0,r.kq)("",!0),(0,r.Uk)(" "+(0,J.zw)(e.row.contacts.web_site)+" ",1),(0,r.Wm)(v,{modelValue:e.row.contacts.web_site,"onUpdate:modelValue":t=>e.row.contacts.web_site=t,onHide:t=>n.changeContact(e.row._id,e.row.contacts)},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{type:"textarea",modelValue:e.row.contacts.web_site,"onUpdate:modelValue":t=>e.row.contacts.web_site=t,label:"Веб сайт"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["modelValue","onUpdate:modelValue","onHide"])])),_:2},1032,["props"]),(0,r.Wm)(x,{key:"mail",props:e},{default:(0,r.w5)((()=>[(0,r._)("div",null,(0,J.zw)(e.row.contacts.mail),1),(0,r.Wm)(v,{modelValue:e.row.contacts.mail,"onUpdate:modelValue":t=>e.row.contacts.mail=t,onHide:t=>n.changeContact(e.row._id,e.row.contacts)},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{type:"textarea",modelValue:e.row.contacts.mail,"onUpdate:modelValue":t=>e.row.contacts.mail=t,label:"Адресс электронной почты"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["modelValue","onUpdate:modelValue","onHide"])])),_:2},1032,["props"]),(0,r.Wm)(x,{key:"views",props:e},{default:(0,r.w5)((()=>[(0,r._)("div",null,(0,J.zw)(e.row.viewCount),1)])),_:2},1032,["props"]),(0,r.Wm)(x,{key:"control"},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{onClick:t=>n.removeSchool(e.row._id),flat:"",dense:"",color:"grey-8"},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{name:"delete_forever"}),(0,r.Wm)(m,null,{default:(0,r.w5)((()=>[(0,r.Uk)("Удалить")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["rows","columns"])])):(0,r.kq)("",!0),(0,r.Wm)(y,{onShow:t[14]||(t[14]=e=>n.mapOpen()),modelValue:s.iconn,"onUpdate:modelValue":t[15]||(t[15]=e=>s.iconn=e)},{default:(0,r.w5)((()=>[(0,r.Wm)(f,null,{default:(0,r.w5)((()=>[(0,r.Wm)(g,{class:"row items-center q-pb-none"},{default:(0,r.w5)((()=>[il,(0,r.Wm)(p),(0,r.wy)((0,r.Wm)(h,{icon:"close",flat:"",round:"",dense:""},null,512),[[V]])])),_:1}),(0,r.Wm)(g,null,{default:(0,r.w5)((()=>[dl,(0,r.Wm)(h,{onClick:t[13]||(t[13]=e=>n.changeCoordinate()),flat:"",style:{width:"100%","background-color":"rgba(7, 7, 7, 0.05)"}},{default:(0,r.w5)((()=>[(0,r.Uk)(" Принять")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),403==s.error?((0,r.wg)(),(0,r.iD)("div",cl,pl)):(0,r.kq)("",!0)])}var wl=a(1728);const gl={setup(){return{newShoolAddressName:(0,s.iH)("")}},data(){return{iconn:(0,s.iH)(!1),icon:(0,s.iH)(!1),newPass:"",text:"",roles:[],searchSelected:"",columns:[{name:"name",label:"Название",align:"left",field:"name",canEdit:!0,sortable:!0},{name:"description",label:"Описание",align:"left",field:"description",canEdit:!0,sortable:!0},{name:"shool_image",label:"Ссылка на изображение школы",align:"left",field:"image_url",canEdit:!0,sortable:!0},{name:"address_str",align:"left",label:"Адресс школы",field:"address.address_str",canEdit:!1,sortable:!0},{name:"address_comment",align:"left",label:"Комментарий к адресу",field:"address.comment",canEdit:!0,sortable:!0},{name:"web_site",align:"left",label:"Сайт школы",field:"contacts.web_site",canEdit:!0,sortable:!0},{name:"mail",align:"left",label:"Адресс электронной почты",field:"contacts.mail",canEdit:!0,sortable:!0},{name:"views",align:"left",label:"Просмотры",field:"viewCount",canEdit:!1,sortable:!0},{name:"control",align:"left",label:"Управление"}],rows:[],error:0,loaded:!1,password:(0,s.iH)(""),isPwd:(0,s.iH)(!0),auth:"12GradMapAdmin345SRscx:23pdmtF334slkRDcS5EREc2",newName:"",newDescription:"",newSchoolImg:"",newAddressStr:"",newAddressComment:"",newWebSite:"",newMail:"",x:0,y:0,xMarkerMap:0,yMarkerMap:0,curMapAdressAdress:{},idMap:""}},mounted(){this.getSchool(),this.searchSelected=this.getSearchParamsArray[0]},methods:{getShortText(e,t=50){return e&&e.length>t?e.substring(0,t)+"...":e},async getSchool(){this.loaded=!1,this.error=0;try{const e=await k.api.get("api/school",{headers:{Authorization:"Basic "+btoa(this.auth),"x-requested-with":"*"}});e.data.forEach((e=>{e["viewCount"]=null!=e.views?Object.keys(e.views).length:0})),this.rows=e.data,this.loaded=!0}catch(e){this.onError(e)}},onError(e){this.loaded=!0,e.response&&e.response.status?(this.error=e.response.status,403!=this.error&&this.$q.notify({type:"negative",message:e.response.data.message??"Ошибка сервера"})):this.$q.notify({type:"negative",message:"Нет соединения с сервером"})},async removeSchool(e){try{await k.api["delete"]("api/school/"+e,{headers:{Authorization:"Basic "+btoa(this.auth),"x-requested-with":"*"}});this.loaded=!0,this.$q.notify({type:"positive",message:"Шкоала удалена"}),this.getSchool()}catch(t){this.onError(t)}},async changeName(e,t){try{await k.api.put("api/school/"+e,{name:t},{headers:{Authorization:"Basic "+btoa(this.auth),"x-requested-with":"*"}}),this.$q.notify({type:"positive",message:"Имя школы сохранено"})}catch(a){this.onError(a)}},async changeDescription(e,t){try{await k.api.put("api/school/"+e,{description:t},{headers:{Authorization:"Basic "+btoa(this.auth),"x-requested-with":"*"}}),this.$q.notify({type:"positive",message:"Описание школы сохранено"})}catch(a){this.onError(a)}},async changeSchoolImage(e,t){try{await k.api.put("api/school/"+e,{image_url:t},{headers:{Authorization:"Basic "+btoa(this.auth),"x-requested-with":"*"}}),this.$q.notify({type:"positive",message:"Ссылка на изображение сохранена"})}catch(a){this.onError(a)}},async changeAddress(e,t){try{await k.api.put("api/school/"+e,{address:t},{headers:{Authorization:"Basic "+btoa(this.auth),"x-requested-with":"*"}}),this.$q.notify({type:"positive",message:"Адрес сохранен"})}catch(a){this.onError(a)}},async changeContact(e,t){try{await k.api.put("api/school/"+e,{contacts:t},{headers:{Authorization:"Basic "+btoa(this.auth),"x-requested-with":"*"}}),this.$q.notify({type:"positive",message:"Ссылка на веб-ресурс сохранена"})}catch(a){this.onError(a)}},async showAddMap(){const e=await(0,wl.z)(),t=new e.Map("container",{center:[37.62199313139937,55.754172570006155],zoom:15,key:"042b5b75-f847-4f2a-b695-b5f58adc9dfd"});let a,o=null;t.on("click",(l=>{if(!l.target)return;const{id:s}=l.target;null==o?(o=s,a=new e.Marker(t,{coordinates:[l.lngLat[0],l.lngLat[1]]})):(o=s,a.destroy(),a=new e.Marker(t,{coordinates:[l.lngLat[0],l.lngLat[1]]})),this.x=l.lngLat[0],this.y=l.lngLat[1],this.getNewSchoolName(),t.setSelectedObjects([o])}))},getNewSchoolName(){const e="rupzho5301",t=`https://catalog.api.2gis.com/3.0/items/geocode?lon=${this.x}&lat=${this.y}&type=building&key=${e}`,a=new XMLHttpRequest;a.open("GET",t),a.onload=()=>{if(200===a.status){const e=JSON.parse(a.responseText);this.newShoolAddressName=e.result.items[0].address_name}},a.send()},async addNewSchool(){if(""!=this.newShoolAddressName&&-1!=this.x&&-1!=this.y)try{k.api.post("api/school",{name:this.newName,description:this.newDescription,image_url:this.newSchoolImg,address:{address_str:this.newShoolAddressName,comment:this.newAddressComment,mapPos:{x:this.x,y:this.y}},contacts:{mail:this.newmail,web_site:this.newWebSite}},{headers:{Authorization:"Basic "+btoa(this.auth),"x-requested-with":"*"}});this.$q.notify({type:"positive",message:"Новое соьбытие успешно добавлен."}),this.icon=!1,this.getSchool()}catch(e){this.onError(e)}else this.$q.notify({type:"negative",message:"Ошибка не все поля заполнены"})},getNewAddSchoolName(){const e="rupzho5301",t=`https://catalog.api.2gis.com/3.0/items/geocode?lon=${this.curMapAdressAdress.mapPos.x}&lat=${this.curMapAdressAdress.mapPos.y}&type=building&key=${e}`,a=new XMLHttpRequest;a.open("GET",t),a.onload=()=>{if(200===a.status){const e=JSON.parse(a.responseText);this.curMapAdressAdress.address_str=e.result.items[0].address_name}},a.send()},async changeCoordinate(){this.getNewAddSchoolName(),setTimeout((()=>{try{k.api.put("api/school/"+this.idMap,{address:this.curMapAdressAdress},{headers:{Authorization:"Basic "+btoa(this.auth),"x-requested-with":"*"}}),this.$q.notify({type:"positive",message:"Координаты школы успешно обновлены"}),this.iconn=!1,this.getSchool()}catch(e){this.onError(e)}}),"2000")},async mapOpen(){const e=await(0,wl.z)(),t=new e.Map("map",{center:[this.curMapAdressAdress.mapPos.x,this.curMapAdressAdress.mapPos.y],zoom:18,key:"042b5b75-f847-4f2a-b695-b5f58adc9dfd"}),a=new e.Marker(t,{coordinates:[this.curMapAdressAdress.mapPos.x,this.curMapAdressAdress.mapPos.y]});let o,l=null;t.on("click",(e=>{if(!e.target)return;const{id:s}=e.target;null==l?(l=s,o=new mapgl.Marker(t,{coordinates:[e.lngLat[0],e.lngLat[1]]}),a.destroy()):(l=s,o.destroy(),o=new mapgl.Marker(t,{coordinates:[e.lngLat[0],e.lngLat[1]]})),this.curMapAdressAdress.mapPos.x=e.lngLat[0],this.curMapAdressAdress.mapPos.y=e.lngLat[1],t.setSelectedObjects([l])}))}},computed:{getSearchParamsArray(){let e=[];return this.columns.forEach((t=>{t.field&&e.push(t.label)})),e},getRows(){if(""!==this.text){let e,t=this.text,a=[];this.columns.forEach((t=>{t.label==this.searchSelected&&(e=t.field)}));let o=e.split(".");return this.rows.map((function(e){let l=e[o[0]];for(let t=1;t<o.length;t++)l=l[o[t]];"object"==typeof l?l.forEach((o=>{o.toString().toLowerCase().includes(t.toString().toLowerCase())&&a.push(e)})):l.toString().toLowerCase().includes(t.toString().toLowerCase())&&a.push(e)})),a}return this.rows}}};var fl=a(1928);const yl=(0,d.Z)(gl,[["render",hl],["__scopeId","data-v-08ed9ed4"]]),_l=yl;z()(gl,"components",{QSpinnerBall:Ia.Z,QInput:q.Z,QIcon:C.Z,QSelect:_a.Z,QBtn:N.Z,QTooltip:ba.Z,QDialog:vo.Z,QCard:W.Z,QBar:xo.Z,QSpace:Mo.Z,QCardSection:E.Z,QSeparator:U.Z,QTable:va.Z,QTh:Qa.Z,QTr:Ya.Z,QTd:Pa.Z,QPopupEdit:Fa.Z,QEditor:fl.Z}),z()(gl,"directives",{ClosePopup:ko.Z});const bl={components:{Roles:ro,Users:Ba,Facts:So,Event:Ko,School:_l},data(){return{selectedTable:"",tableOptions:["Роли","Пользователи","Факты","Мероприятия","Школы"]}}},vl=(0,d.Z)(bl,[["render",Va],["__scopeId","data-v-f8e56c08"]]),xl=vl;z()(bl,"components",{QCard:W.Z,QCardSection:E.Z,QSelect:_a.Z});var Ml=a(2822),kl=a.n(Ml);const Dl=e=>((0,r.dD)("data-v-4f6b05cb"),e=e(),(0,r.Cn)(),e),Sl={class:"row q-pt-lg justify-end"},Vl={class:"text-center"},Wl=Dl((()=>(0,r._)("div",null,"Идет отправка сообщения",-1))),El={class:"text-center"},ql=Dl((()=>(0,r._)("img",{class:"img",src:kl()},null,-1))),Ul={class:"text-h4",style:{opacity:"0.5"}};function Cl(e,t,a,o,l,s){const n=(0,r.up)("q-input"),i=(0,r.up)("q-btn"),d=(0,r.up)("q-form"),c=(0,r.up)("q-card-section"),u=(0,r.up)("q-spinner-gears"),m=(0,r.up)("q-card");return(0,r.wg)(),(0,r.j4)(m,null,{default:(0,r.w5)((()=>[l.sendProcessStart?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(c,{key:0},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{class:"q-px-md q-py-md my-card"},{default:(0,r.w5)((()=>[(0,r.Wm)(n,{modelValue:l.username,"onUpdate:modelValue":t[0]||(t[0]=e=>l.username=e),label:"Имя пользователя"},null,8,["modelValue"]),(0,r.Wm)(n,{modelValue:l.theme,"onUpdate:modelValue":t[1]||(t[1]=e=>l.theme=e),label:"Тема обращения"},null,8,["modelValue"]),(0,r.Wm)(n,{modelValue:l.text,"onUpdate:modelValue":t[2]||(t[2]=e=>l.text=e),type:"textarea",label:"Ваши вопросы и предложения"},null,8,["modelValue"]),(0,r._)("div",Sl,[(0,r.Wm)(i,{flat:"",class:"button",onClick:s.sendMail,label:"Отправить"},null,8,["onClick"])])])),_:1})])),_:1})),l.sendProcessStart&&l.showSpinner?((0,r.wg)(),(0,r.j4)(c,{key:1},{default:(0,r.w5)((()=>[(0,r._)("div",Vl,[(0,r.Wm)(u,{size:"100px",color:"primary"}),Wl])])),_:1})):(0,r.kq)("",!0),l.sendProcessStart&&!l.showSpinner?((0,r.wg)(),(0,r.j4)(c,{key:2},{default:(0,r.w5)((()=>[(0,r._)("div",El,[ql,(0,r._)("div",Ul,(0,J.zw)(this.sendResult),1),(0,r.Wm)(i,{class:"text-h6 button",style:{opacity:"0.5"},unelevated:"",onClick:s.semdMore,label:"Отправить еще одно обращение","no-caps":""},null,8,["onClick"])])])),_:1})):(0,r.kq)("",!0)])),_:1})}const Nl={data(){return{sendProcessStart:!1,theme:"",username:"",text:"",show:!1,showSpinner:!1,sendResult:"",auth:"12GradMapAdmin345SRscx:23pdmtF334slkRDcS5EREc2"}},methods:{clearForm(){this.theme="",this.text="",this.username=""},semdMore(){this.sendProcessStart=!1,this.clearForm()},showModal(){this.show=!0,this.showSpinner=!0,setTimeout((()=>{this.showSpinner=!1,this.message="Ваше сообщение успешно отпправлено!",setTimeout((()=>{this.show=!1,this.message=""}),2e3)}),3e3)},async sendMail(){if(""!=this.username)if(""!=this.theme)if(""!=this.message)try{this.showSpinner=!0,this.sendProcessStart=!0;await k.api.post("api/mail/send",{email:this.username,subject:this.theme,message:this.text},{headers:{Authorization:"Basic "+btoa(this.auth),"x-requested-with":"*"}});this.showSpinner=!1,this.sendResult="Доставкой вашего письма занимается наш самый ответственный сотрудик!"}catch(e){this.showSpinner=!1,this.sendResult="При отправке сообщения возникла ошибка."}else this.$q.notify({type:"negative",message:"Вы не текст сообщения"});else this.$q.notify({type:"negative",message:"Вы не ввели тему обращения"});else this.$q.notify({type:"negative",message:"Вы не ввели свою контактрую информацию"})}}};var Tl=a(8326),zl=a(9120);const jl=(0,d.Z)(Nl,[["render",Cl],["__scopeId","data-v-4f6b05cb"]]),Ll=jl;z()(Nl,"components",{QCard:W.Z,QCardSection:E.Z,QForm:Tl.Z,QInput:q.Z,QBtn:N.Z,QSpinnerGears:zl.Z});const Zl=e=>((0,r.dD)("data-v-3d1b4fa2"),e=e(),(0,r.Cn)(),e),Al={class:"row"},Ol={class:"col"},Il=Zl((()=>(0,r._)("div",{class:"text-h6"},"Данные пользователя",-1))),Ql={class:"col"},Yl=Zl((()=>(0,r._)("div",{class:"text-h6"},"Изменение пароля",-1)));function Pl(e,t,a,o,l,s){const n=(0,r.up)("q-card-section"),i=(0,r.up)("q-icon"),d=(0,r.up)("q-input"),c=(0,r.up)("q-separator"),u=(0,r.up)("q-btn"),m=(0,r.up)("q-card");return(0,r.wg)(),(0,r.j4)(m,null,{default:(0,r.w5)((()=>[(0,r._)("div",Al,[(0,r._)("div",Ol,[(0,r.Wm)(n,null,{default:(0,r.w5)((()=>[Il])),_:1}),(0,r.Wm)(n,null,{default:(0,r.w5)((()=>[(0,r.Wm)(d,{readonly:l.cantEdit,modelValue:l.name,"onUpdate:modelValue":t[1]||(t[1]=e=>l.name=e),hint:"Имя пользователя",onBlur:t[2]||(t[2]=e=>s.changeName())},{append:(0,r.w5)((()=>[(0,r.Wm)(i,{name:"edit",class:"cursor-pointer",onClick:t[0]||(t[0]=e=>l.cantEdit=!l.cantEdit)})])),_:1},8,["readonly","modelValue"]),(0,r.Wm)(d,{readonly:!0,modelValue:l.username,"onUpdate:modelValue":t[3]||(t[3]=e=>l.username=e),hint:"Логин в системе"},null,8,["modelValue"])])),_:1})]),(0,r.Wm)(c,{vertical:"",inset:""}),(0,r._)("div",Ql,[(0,r.Wm)(n,null,{default:(0,r.w5)((()=>[Yl])),_:1}),(0,r.Wm)(n,null,{default:(0,r.w5)((()=>[(0,r.Wm)(d,{modelValue:l.password,"onUpdate:modelValue":t[5]||(t[5]=e=>l.password=e),type:l.isPwd?"password":"text",label:"Новый пароль"},{append:(0,r.w5)((()=>[(0,r.Wm)(i,{name:l.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:t[4]||(t[4]=e=>l.isPwd=!l.isPwd)},null,8,["name"])])),_:1},8,["modelValue","type"])])),_:1}),(0,r.Wm)(n,null,{default:(0,r.w5)((()=>[(0,r.Wm)(d,{modelValue:l.password_again,"onUpdate:modelValue":t[6]||(t[6]=e=>l.password_again=e),type:l.isPwd?"password":"text",label:"Подтвержение пароля"},null,8,["modelValue","type"])])),_:1}),(0,r.Wm)(n,null,{default:(0,r.w5)((()=>[(0,r.Wm)(u,{flat:"",class:"button",label:"Изменить пароль",onClick:s.changeUserPass},null,8,["onClick"])])),_:1})])])])),_:1})}const Fl={beforeMount(){this.username=S().get("login"),this.name=S().get("uname")},data(){return{password:"",password_again:"",isPwd:(0,s.iH)(!0),username:"",name:"",cantEdit:!0}},methods:{async changeName(){if(this.cantEdit=!0,""!=this.name){if(S().get("uname")!=this.name)try{const e=await k.api.post("auth/user",{username:S().get("login")});await k.api.put("auth/updateUserName",{id:e.data.id,name:this.name});this.$q.notify({type:"positive",message:"Имя пользователя изменено"}),S().set("uname",this.name,"10h"),window.location.reload()}catch(e){this.name=S().get("uname"),this.onError(e)}}else this.$q.notify({type:"negative",message:"Имя пользователя не может быть пустым"})},onError(e){this.loaded=!0,e.response&&e.response.status?(this.error=e.response.status,403!=this.error&&this.$q.notify({type:"negative",message:e.response.data.message??"Ошибка сервера"})):this.$q.notify({type:"negative",message:"Нет соединения с сервером"})},async changeUserPass(){if(""==this.password||this.password<4)this.$q.notify({type:"negative",message:"Новый пароль должен быть более 3 символов"});else if(""!=this.password_again)if(this.password_again==this.password)try{const e=await k.api.post("auth/user",{username:S().get("login")});await k.api.put("auth/updatePass",{id:e.data._id,newPass:this.password}),this.loaded=!0,this.$q.notify({type:"positive",message:"Пароль изменен"})}catch(e){this.onError(e)}else this.$q.notify({type:"negative",message:"Пароли не совпадают"});else this.$q.notify({type:"negative",message:"Введите подтверждение пароля"})}}},$l=(0,d.Z)(Fl,[["render",Pl],["__scopeId","data-v-3d1b4fa2"]]),Bl=$l;z()(Fl,"components",{QCard:W.Z,QCardSection:E.Z,QInput:q.Z,QIcon:C.Z,QSeparator:U.Z,QBtn:N.Z});const Hl=[{path:"/auth",component:G,name:"auth",children:[{path:"login",name:"login",component:I},{path:"registr",name:"registr",component:L}]},{path:"/",component:be,children:[{path:"statistic",name:"statistic",component:Sa},{path:"dataedit",name:"dataedit",component:xl},{path:"techsupport",name:"techsupport",component:Ll},{path:"profile",name:"profile",component:Bl}],beforeEnter:(e,t)=>{if(!S().get("token")&&"auth"!==e.name)return{name:"auth"}},beforeUpdate(e,t){if(!S().get("token")&&"auth"!==e.name)return{name:"auth"}}},{path:"/:catchAll(.*)*",component:Ue}],Rl=Hl,Gl=(0,m.BC)((function(){const e=p.r5,t=(0,p.p7)({scrollBehavior:()=>({left:0,top:0}),routes:Rl,history:e("")});return t}));async function Jl(e,t){const a=e(u);a.use(l.Z,t);const o=(0,s.Xl)("function"===typeof Gl?await Gl({}):Gl);return{app:a,router:o}}var Xl=a(4328);const Kl={config:{},plugins:{Notify:Xl.Z}},es="";async function ts({app:e,router:t},a){let o=!1;const l=e=>{try{return t.resolve(e).href}catch(a){}return Object(e)===e?null:e},s=e=>{if(o=!0,"string"===typeof e&&/^https?:\/\//.test(e))return void(window.location.href=e);const t=l(e);null!==t&&(window.location.href=t,window.location.reload())},r=window.location.href.replace(window.location.origin,"");for(let i=0;!1===o&&i<a.length;i++)try{await a[i]({app:e,router:t,ssrContext:null,redirect:s,urlPath:r,publicPath:es})}catch(n){return n&&n.url?void s(n.url):void console.error("[Quasar] boot error:",n)}!0!==o&&(e.use(t),e.mount("#q-app"))}Jl(o.ri,Kl).then((e=>{const[t,o]=void 0!==Promise.allSettled?["allSettled",e=>e.map((e=>{if("rejected"!==e.status)return e.value.default;console.error("[Quasar] boot error:",e.reason)}))]:["all",e=>e.map((e=>e.default))];return Promise[t]([Promise.resolve().then(a.bind(a,1569))]).then((t=>{const a=o(t).filter((e=>"function"===typeof e));ts(e,a)}))}))},1569:(e,t,a)=>{"use strict";a.r(t),a.d(t,{api:()=>s,default:()=>r});var o=a(3340),l=a(7524);const s=l.Z.create({baseURL:"https://graduate-map.ru/"}),r=(0,o.xr)((({app:e})=>{e.config.globalProperties.$axios=l.Z,e.config.globalProperties.$api=s}))},5342:(e,t,a)=>{e.exports=a.p+"img/404безошибкиcпузырямиv3.3c0a3462.svg"},2778:(e,t,a)=>{e.exports=a.p+"img/Logo.78c4f299.svg"},577:(e,t,a)=>{e.exports=a.p+"img/LogoInside.d4536c83.svg"},918:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGRhdGEtbmFtZT0iTGF5ZXIgMSIgd2lkdGg9IjY0Ny42MzYyNiIgaGVpZ2h0PSI2MzIuMTczODMiIHZpZXdCb3g9IjAgMCA2NDcuNjM2MjYgNjMyLjE3MzgzIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PHBhdGggZD0iTTY4Ny4zMjc5LDI3Ni4wODY5MUg1MTIuODE4MTNhMTUuMDE4MjgsMTUuMDE4MjgsMCwwLDAtMTUsMTV2Mzg3Ljg1bC0yLC42MTAwNS00Mi44MTAwNiwxMy4xMWE4LjAwNjc2LDguMDA2NzYsMCwwLDEtOS45ODk3NC01LjMxTDMxNS42NzgsMjcxLjM5NjkxYTguMDAzMTMsOC4wMDMxMywwLDAsMSw1LjMxMDA2LTkuOTlsNjUuOTcwMjItMjAuMiwxOTEuMjUtNTguNTQsNjUuOTY5NzItMjAuMmE3Ljk4OTI3LDcuOTg5MjcsMCwwLDEsOS45OTAyNCw1LjNsMzIuNTQ5OCwxMDYuMzJaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjc2LjE4MTg3IC0xMzMuOTEzMDkpIiBmaWxsPSIjZjJmMmYyIi8+PHBhdGggZD0iTTcyNS40MDgsMjc0LjA4NjkxbC0zOS4yMy0xMjguMTRhMTYuOTkzNjgsMTYuOTkzNjgsMCwwLDAtMjEuMjMtMTEuMjhsLTkyLjc1LDI4LjM5TDM4MC45NTgyNywyMjEuNjA2OTNsLTkyLjc1LDI4LjRhMTcuMDE1MiwxNy4wMTUyLDAsMCwwLTExLjI4MDI4LDIxLjIzbDEzNC4wODAwOCw0MzcuOTNhMTcuMDI2NjEsMTcuMDI2NjEsMCwwLDAsMTYuMjYwMjYsMTIuMDMsMTYuNzg5MjYsMTYuNzg5MjYsMCwwLDAsNC45Njk3Mi0uNzVsNjMuNTgwMDgtMTkuNDYsMi0uNjJ2LTIuMDlsLTIsLjYxLTY0LjE2OTkyLDE5LjY1YTE1LjAxNDg5LDE1LjAxNDg5LDAsMCwxLTE4LjczLTkuOTVsLTEzNC4wNjk4My00MzcuOTRhMTQuOTc5MzUsMTQuOTc5MzUsMCwwLDEsOS45NDk3MS0xOC43M2w5Mi43NS0yOC40LDE5MS4yNDAyNC01OC41NCw5Mi43NS0yOC40YTE1LjE1NTUxLDE1LjE1NTUxLDAsMCwxLDQuNDA5NjYtLjY2LDE1LjAxNDYxLDE1LjAxNDYxLDAsMCwxLDE0LjMyMDMyLDEwLjYxbDM5LjA0OTgsMTI3LjU2LjYyMDEyLDJoMi4wODAwOFoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yNzYuMTgxODcgLTEzMy45MTMwOSkiIGZpbGw9IiMzZjNkNTYiLz48cGF0aCBkPSJNMzk4Ljg2Mjc5LDI2MS43MzM4OWE5LjAxNTcsOS4wMTU3LDAsMCwxLTguNjExMzMtNi4zNjY3bC0xMi44ODAzNy00Mi4wNzE3OGE4Ljk5ODg0LDguOTk4ODQsMCwwLDEsNS45NzEyLTExLjI0MDIzbDE3NS45MzktNTMuODYzNzdhOS4wMDg2Nyw5LjAwODY3LDAsMCwxLDExLjI0MDcyLDUuOTcwN2wxMi44ODAzNyw0Mi4wNzIyN2E5LjAxMDI5LDkuMDEwMjksMCwwLDEtNS45NzA3LDExLjI0MDcyTDQwMS40OTIxOSwyNjEuMzM4ODdBOC45NzYsOC45NzYsMCwwLDEsMzk4Ljg2Mjc5LDI2MS43MzM4OVoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yNzYuMTgxODcgLTEzMy45MTMwOSkiIGZpbGw9IiMxOTc2ZDIiLz48Y2lyY2xlIGN4PSIxOTAuMTUzNTEiIGN5PSIyNC45NTQ2NSIgcj0iMjAiIGZpbGw9IiMxOTc2ZDIiLz48Y2lyY2xlIGN4PSIxOTAuMTUzNTEiIGN5PSIyNC45NTQ2NSIgcj0iMTIuNjY0NjIiIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJNODc4LjgxODM2LDcxNi4wODY5MWgtMzM4YTguNTA5ODEsOC41MDk4MSwwLDAsMS04LjUtOC41di00MDVhOC41MDk1MSw4LjUwOTUxLDAsMCwxLDguNS04LjVoMzM4YTguNTA5ODIsOC41MDk4MiwwLDAsMSw4LjUsOC41djQwNUE4LjUxMDEzLDguNTEwMTMsMCwwLDEsODc4LjgxODM2LDcxNi4wODY5MVoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yNzYuMTgxODcgLTEzMy45MTMwOSkiIGZpbGw9IiNlNmU2ZTYiLz48cGF0aCBkPSJNNzIzLjMxODEzLDI3NC4wODY5MWgtMjEwLjVhMTcuMDI0MTEsMTcuMDI0MTEsMCwwLDAtMTcsMTd2NDA3LjhsMi0uNjF2LTQwNy4xOWExNS4wMTgyOCwxNS4wMTgyOCwwLDAsMSwxNS0xNUg3MjMuOTM4MjVabTE4My41LDBoLTM5NGExNy4wMjQxMSwxNy4wMjQxMSwwLDAsMC0xNywxN3Y0NThhMTcuMDI0MSwxNy4wMjQxLDAsMCwwLDE3LDE3aDM5NGExNy4wMjQxLDE3LjAyNDEsMCwwLDAsMTctMTd2LTQ1OEExNy4wMjQxMSwxNy4wMjQxMSwwLDAsMCw5MDYuODE4MTMsMjc0LjA4NjkxWm0xNSw0NzVhMTUuMDE4MjgsMTUuMDE4MjgsMCwwLDEtMTUsMTVoLTM5NGExNS4wMTgyOCwxNS4wMTgyOCwwLDAsMS0xNS0xNXYtNDU4YTE1LjAxODI4LDE1LjAxODI4LDAsMCwxLDE1LTE1aDM5NGExNS4wMTgyOCwxNS4wMTgyOCwwLDAsMSwxNSwxNVoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yNzYuMTgxODcgLTEzMy45MTMwOSkiIGZpbGw9IiMzZjNkNTYiLz48cGF0aCBkPSJNODAxLjgxODM2LDMxOC4wODY5MWgtMTg0YTkuMDEwMTUsOS4wMTAxNSwwLDAsMS05LTl2LTQ0YTkuMDEwMTYsOS4wMTAxNiwwLDAsMSw5LTloMTg0YTkuMDEwMTYsOS4wMTAxNiwwLDAsMSw5LDl2NDRBOS4wMTAxNSw5LjAxMDE1LDAsMCwxLDgwMS44MTgzNiwzMTguMDg2OTFaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjc2LjE4MTg3IC0xMzMuOTEzMDkpIiBmaWxsPSIjMTk3NmQyIi8+PGNpcmNsZSBjeD0iNDMzLjYzNjI2IiBjeT0iMTA1LjE3MzgzIiByPSIyMCIgZmlsbD0iIzE5NzZkMiIvPjxjaXJjbGUgY3g9IjQzMy42MzYyNiIgY3k9IjEwNS4xNzM4MyIgcj0iMTIuMTgxODciIGZpbGw9IiNmZmYiLz48L3N2Zz4NCg=="},2822:(e,t,a)=>{e.exports=a.p+"img/Доставкаписемv2.6fdd436b.svg"},2796:(e,t,a)=>{e.exports=a.p+"img/Уваснедостаточноправv2.a7aa7103.svg"}},t={};function a(o){var l=t[o];if(void 0!==l)return l.exports;var s=t[o]={exports:{}};return e[o].call(s.exports,s,s.exports,a),s.exports}a.m=e,(()=>{var e=[];a.O=(t,o,l,s)=>{if(!o){var r=1/0;for(c=0;c<e.length;c++){for(var[o,l,s]=e[c],n=!0,i=0;i<o.length;i++)(!1&s||r>=s)&&Object.keys(a.O).every((e=>a.O[e](o[i])))?o.splice(i--,1):(n=!1,s<r&&(r=s));if(n){e.splice(c--,1);var d=l();void 0!==d&&(t=d)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[o,l,s]}})(),(()=>{a.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return a.d(t,{a:t}),t}})(),(()=>{a.d=(e,t)=>{for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}})(),(()=>{a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{a.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{a.p=""})(),(()=>{var e={143:0};a.O.j=t=>0===e[t];var t=(t,o)=>{var l,s,[r,n,i]=o,d=0;if(r.some((t=>0!==e[t]))){for(l in n)a.o(n,l)&&(a.m[l]=n[l]);if(i)var c=i(a)}for(t&&t(o);d<r.length;d++)s=r[d],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(c)},o=globalThis["webpackChunkclients"]=globalThis["webpackChunkclients"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var o=a.O(void 0,[736],(()=>a(4557)));o=a.O(o)})();